# 任意门

TODO：com



## 用户角度----效果

图片：长按 + 左右移动 --------> 识别为任意门

https://www.bilibili.com/video/BV18e411H72q/?spm_id_from=333.337.search-card.all.click&vd_source=3eebd10b94a8a76eaf4b78bee8f23884



文字：长按？OR 长按+拖动？

TODO：如果文字仅长按，微信自己弹出来的复制分享怎么办？

https://www.bilibili.com/video/BV1zW4y1w7iD/?spm_id_from=333.337.search-card.all.click&vd_source=3eebd10b94a8a76eaf4b78bee8f23884

## 实现机制（猜测）

### 必然：

> 【1】原APP进程 ---->【2】 框架侧插桩，框架侧拿到数据(原APP进程) ---->  【3】 给到renyimen的服务  ----->  【3】服务调用 APP2的接口，给到数据

从代码实现角度（编译角度）：

> 框架侧对 APP侧插装



### 【2】的实现：

方式一：

> view有clipdata相关接口：~~能拿到string数据、viewImage的url数据~~
>
> 参考：https://stackoverflow.com/questions/21751429/android-how-can-i-get-image-from-clipdata

方式二：

> 类似于**相册里的分享/备忘录里文字**的分享。。。。。分享是安卓原生的功能 ----> 必然·很多APP2都适配过！！！！！



###  【3】的实现：

> 大部分需要三方应用适配
>
> 实在不行，用方式二



### 关于大数据

在【2】----> 【3】的中间：优先推荐最有可能的目标应用





# 窗口的流转

1、无边界流转：**产品功能**角度，一个硬件屏幕上，无边界流转

结构实现，**必然有：** 

> 窗口级实现（~~自由浮窗~~）       
>
> display级别实现（  ~~virtualDisplay~~）

2、跨屏流转：屏-----物理屏幕

关键点：如何实现，一半窗口在物理屏幕1上，另一半在物理屏幕2上？

 法一： 

> 结构实现：两个物理屏幕 对应  一个display。。。。最大限制，两个物理屏要一样高

法二： 没有中间态（一边remove、一边add）  ---------->  大概率这个

3、无边界的贯穿显示：带鱼屏，整个作为一个display

