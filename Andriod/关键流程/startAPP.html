
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Start APP · Kent的博客</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-toggle-chapters/toggle.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-treeview/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-sidebar-style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-click-reveal/click_reveal.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-accordion/accordion.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../其他核心服务/" />
    
    
    <link rel="prev" href="InitSystem.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../0_图形系统/">
            
                <a href="../../0_图形系统/">
            
                    
                    0_图形系统
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../0_图形系统/0_Graphic系统总论/0_Graphic系统总论.html">
            
                <a href="../../0_图形系统/0_Graphic系统总论/0_Graphic系统总论.html">
            
                    
                    0_Graphic系统总论
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../0_图形系统/1_Render系统/">
            
                <a href="../../0_图形系统/1_Render系统/">
            
                    
                    1_Render系统
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../0_图形系统/1_Render系统/opengl.html">
            
                <a href="../../0_图形系统/1_Render系统/opengl.html">
            
                    
                    Opengl
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../0_图形系统/2_窗口系统/">
            
                <a href="../../0_图形系统/2_窗口系统/">
            
                    
                    2_窗口系统
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../0_图形系统/2_窗口系统/0_窗口系统总论/0_窗口系统总论.html">
            
                <a href="../../0_图形系统/2_窗口系统/0_窗口系统总论/0_窗口系统总论.html">
            
                    
                    0_窗口系统总论
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../../0_图形系统/2_窗口系统/次要/">
            
                <a href="../../0_图形系统/2_窗口系统/次要/">
            
                    
                    次要
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.2.1" data-path="../../0_图形系统/2_窗口系统/次要/virtualDisplay.html">
            
                <a href="../../0_图形系统/2_窗口系统/次要/virtualDisplay.html">
            
                    
                    Virtual Display
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2.2" data-path="../../0_图形系统/2_窗口系统/次要/自由窗口.html">
            
                <a href="../../0_图形系统/2_窗口系统/次要/自由窗口.html">
            
                    
                    自由窗口
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../../0_图形系统/2_窗口系统/SurfaceControl.html">
            
                <a href="../../0_图形系统/2_窗口系统/SurfaceControl.html">
            
                    
                    Surface Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../../0_图形系统/2_窗口系统/virtualDisplay.html">
            
                <a href="../../0_图形系统/2_窗口系统/virtualDisplay.html">
            
                    
                    Virtual Display
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="../../0_图形系统/2_窗口系统/wms_animination.html">
            
                <a href="../../0_图形系统/2_窗口系统/wms_animination.html">
            
                    
                    Wms Animination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.6" data-path="../../0_图形系统/2_窗口系统/窗口管理之weston.html">
            
                <a href="../../0_图形系统/2_窗口系统/窗口管理之weston.html">
            
                    
                    窗口管理之weston
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.7" data-path="../../0_图形系统/2_窗口系统/窗口管理器WMS.html">
            
                <a href="../../0_图形系统/2_窗口系统/窗口管理器WMS.html">
            
                    
                    窗口管理器WMS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../0_图形系统/3_Display系统/">
            
                <a href="../../0_图形系统/3_Display系统/">
            
                    
                    3_Display系统
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../0_图形系统/3_Display系统/Display系统.html">
            
                <a href="../../0_图形系统/3_Display系统/Display系统.html">
            
                    
                    Display系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../../0_图形系统/3_Display系统/DRM.html">
            
                <a href="../../0_图形系统/3_Display系统/DRM.html">
            
                    
                    DRM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../../0_图形系统/3_Display系统/sf特效.html">
            
                <a href="../../0_图形系统/3_Display系统/sf特效.html">
            
                    
                    sf特效
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../../0_图形系统/3_Display系统/合成之surfaceFlinger.html">
            
                <a href="../../0_图形系统/3_Display系统/合成之surfaceFlinger.html">
            
                    
                    合成之surfaceFlinger
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../../0_图形系统/3_Display系统/合成之weston.html">
            
                <a href="../../0_图形系统/3_Display系统/合成之weston.html">
            
                    
                    合成之weston
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../0_图形系统/其他/">
            
                <a href="../../0_图形系统/其他/">
            
                    
                    其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../0_图形系统/其他/QT.html">
            
                <a href="../../0_图形系统/其他/QT.html">
            
                    
                    QT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../../0_图形系统/其他/多屏显示分析.html">
            
                <a href="../../0_图形系统/其他/多屏显示分析.html">
            
                    
                    多屏显示分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../0_输入系统/">
            
                <a href="../../0_输入系统/">
            
                    
                    0_输入系统
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../0_输入系统/Input.html">
            
                <a href="../../0_输入系统/Input.html">
            
                    
                    Input
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../0_输入系统/全局手势.html">
            
                <a href="../../0_输入系统/全局手势.html">
            
                    
                    全局手势
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../0_进程管理/">
            
                <a href="../../0_进程管理/">
            
                    
                    0_进程管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../0_进程管理/0_AMS.html">
            
                <a href="../../0_进程管理/0_AMS.html">
            
                    
                    0 AMS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../0_进程管理/App保活的方式.html">
            
                <a href="../../0_进程管理/App保活的方式.html">
            
                    
                    App保活的方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../0_进程管理/后台杀进程.html">
            
                <a href="../../0_进程管理/后台杀进程.html">
            
                    
                    后台杀进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../0_进程管理/杀进程原理.html">
            
                <a href="../../0_进程管理/杀进程原理.html">
            
                    
                    杀进程原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../0_进程管理/进程与子进程.html">
            
                <a href="../../0_进程管理/进程与子进程.html">
            
                    
                    进程与子进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../../0_进程管理/进程管理系列0_总论.html">
            
                <a href="../../0_进程管理/进程管理系列0_总论.html">
            
                    
                    进程管理系列0_总论
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../../0_进程管理/进程管理系列1之进程的创建.html">
            
                <a href="../../0_进程管理/进程管理系列1之进程的创建.html">
            
                    
                    进程管理系列1之进程的创建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../../0_进程管理/进程管理系列2之进程的优先级.html">
            
                <a href="../../0_进程管理/进程管理系列2之进程的优先级.html">
            
                    
                    进程管理系列2之进程的优先级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../../0_进程管理/进程管理系列3之内存回收.html">
            
                <a href="../../0_进程管理/进程管理系列3之内存回收.html">
            
                    
                    进程管理系列3之内存回收
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../">
            
                <a href="../">
            
                    
                    Andriod
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="./">
            
                <a href="./">
            
                    
                    关键流程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="InitSystem.html">
            
                <a href="InitSystem.html">
            
                    
                    Init System
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.1.2" data-path="startAPP.html">
            
                <a href="startAPP.html">
            
                    
                    Start APP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../其他核心服务/">
            
                <a href="../其他核心服务/">
            
                    
                    其他核心服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../其他核心服务/1_InputMethod.html">
            
                <a href="../其他核心服务/1_InputMethod.html">
            
                    
                    1 Input Method
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../其他核心服务/multi-client-ime.html">
            
                <a href="../其他核心服务/multi-client-ime.html">
            
                    
                    Multi Client Ime
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../其他核心服务/无障碍_.html">
            
                <a href="../其他核心服务/无障碍_.html">
            
                    
                    无障碍_
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../0_AndriodSystem.html">
            
                <a href="../0_AndriodSystem.html">
            
                    
                    0 Andriod System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../log框架.html">
            
                <a href="../log框架.html">
            
                    
                    log框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../permissions.html">
            
                <a href="../permissions.html">
            
                    
                    Permissions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../模型.html">
            
                <a href="../模型.html">
            
                    
                    模型
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../coding/">
            
                <a href="../../coding/">
            
                    
                    Coding
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../coding/0_computorBase/">
            
                <a href="../../coding/0_computorBase/">
            
                    
                    0 Computor Base
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../../coding/0_computorBase/DesignPattern.html">
            
                <a href="../../coding/0_computorBase/DesignPattern.html">
            
                    
                    Design Pattern
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../../coding/0_computorBase/HowToReadCode.html">
            
                <a href="../../coding/0_computorBase/HowToReadCode.html">
            
                    
                    How To Read Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="../../coding/0_computorBase/HowWritecode.html">
            
                <a href="../../coding/0_computorBase/HowWritecode.html">
            
                    
                    How Writecode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.4" data-path="../../coding/0_computorBase/linux.html">
            
                <a href="../../coding/0_computorBase/linux.html">
            
                    
                    Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.5" data-path="../../coding/0_computorBase/linux文件系统.html">
            
                <a href="../../coding/0_computorBase/linux文件系统.html">
            
                    
                    linux文件系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.6" data-path="../../coding/0_computorBase/OperateSystem.html">
            
                <a href="../../coding/0_computorBase/OperateSystem.html">
            
                    
                    Operate System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.7" data-path="../../coding/0_computorBase/refactor.html">
            
                <a href="../../coding/0_computorBase/refactor.html">
            
                    
                    Refactor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.8" data-path="../../coding/0_computorBase/用户_用户组.html">
            
                <a href="../../coding/0_computorBase/用户_用户组.html">
            
                    
                    用户_用户组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.9" data-path="../../coding/0_computorBase/解耦.html">
            
                <a href="../../coding/0_computorBase/解耦.html">
            
                    
                    解耦
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../coding/0_IPC/">
            
                <a href="../../coding/0_IPC/">
            
                    
                    0 IPC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../../coding/0_IPC/AndriodIPC.html">
            
                <a href="../../coding/0_IPC/AndriodIPC.html">
            
                    
                    Andriod IPC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../../coding/0_IPC/IPC前提_序列化.html">
            
                <a href="../../coding/0_IPC/IPC前提_序列化.html">
            
                    
                    IPC前提_序列化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="../../coding/0_IPC/socket.html">
            
                <a href="../../coding/0_IPC/socket.html">
            
                    
                    Socket
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4" data-path="../../coding/0_IPC/线程间通信.html">
            
                <a href="../../coding/0_IPC/线程间通信.html">
            
                    
                    线程间通信
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../coding/0_性能/">
            
                <a href="../../coding/0_性能/">
            
                    
                    0_性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../../coding/0_性能/profiler.html">
            
                <a href="../../coding/0_性能/profiler.html">
            
                    
                    Profiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="../../coding/0_性能/Systrace.html">
            
                <a href="../../coding/0_性能/Systrace.html">
            
                    
                    Systrace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3" data-path="../../coding/0_性能/内存.html">
            
                <a href="../../coding/0_性能/内存.html">
            
                    
                    内存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4" data-path="../../coding/0_性能/性能_.html">
            
                <a href="../../coding/0_性能/性能_.html">
            
                    
                    性能_
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../../coding/1_稳定性/">
            
                <a href="../../coding/1_稳定性/">
            
                    
                    1_稳定性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1" data-path="../../coding/1_稳定性/ANR.html">
            
                <a href="../../coding/1_稳定性/ANR.html">
            
                    
                    ANR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2" data-path="../../coding/1_稳定性/WatchDog.html">
            
                <a href="../../coding/1_稳定性/WatchDog.html">
            
                    
                    Watch Dog
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../../coding/AndriodCar/">
            
                <a href="../../coding/AndriodCar/">
            
                    
                    Andriod Car
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../../coding/AndriodCar/CarService.html">
            
                <a href="../../coding/AndriodCar/CarService.html">
            
                    
                    Car Service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../../coding/AndroidTool/">
            
                <a href="../../coding/AndroidTool/">
            
                    
                    Android Tool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.6.1" data-path="../../coding/AndroidTool/HierarchyView.html">
            
                <a href="../../coding/AndroidTool/HierarchyView.html">
            
                    
                    Hierarchy View
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../../coding/App/">
            
                <a href="../../coding/App/">
            
                    
                    App
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.7.1" data-path="../../coding/App/APK_64bit_32bit.html">
            
                <a href="../../coding/App/APK_64bit_32bit.html">
            
                    
                    APK 64 Bit 32 Bit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7.2" data-path="../../coding/App/APP开发.html">
            
                <a href="../../coding/App/APP开发.html">
            
                    
                    APP开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7.3" data-path="../../coding/App/launcher3.html">
            
                <a href="../../coding/App/launcher3.html">
            
                    
                    Launcher 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7.4" data-path="../../coding/App/SystemUI.html">
            
                <a href="../../coding/App/SystemUI.html">
            
                    
                    System UI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7.5" data-path="../../coding/App/小程序.html">
            
                <a href="../../coding/App/小程序.html">
            
                    
                    小程序
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../../coding/CodingLanguage/">
            
                <a href="../../coding/CodingLanguage/">
            
                    
                    Coding Language
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.8.1" data-path="../../coding/CodingLanguage/c_cpp_java.html">
            
                <a href="../../coding/CodingLanguage/c_cpp_java.html">
            
                    
                    C Cpp Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.2" data-path="../../coding/CodingLanguage/java反射.html">
            
                <a href="../../coding/CodingLanguage/java反射.html">
            
                    
                    java反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.3" data-path="../../coding/CodingLanguage/JNI.html">
            
                <a href="../../coding/CodingLanguage/JNI.html">
            
                    
                    JNI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.4" data-path="../../coding/CodingLanguage/js.html">
            
                <a href="../../coding/CodingLanguage/js.html">
            
                    
                    Js
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.5" data-path="../../coding/CodingLanguage/python.html">
            
                <a href="../../coding/CodingLanguage/python.html">
            
                    
                    Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.6" data-path="../../coding/CodingLanguage/R.html">
            
                <a href="../../coding/CodingLanguage/R.html">
            
                    
                    R
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../../coding/Features/">
            
                <a href="../../coding/Features/">
            
                    
                    Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.9.1" data-path="../../coding/Features/其他特性.html">
            
                <a href="../../coding/Features/其他特性.html">
            
                    
                    其他特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.2" data-path="../../coding/Features/多用户.html">
            
                <a href="../../coding/Features/多用户.html">
            
                    
                    多用户
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../../coding/other%20OS/README.md">
            
                <span>
            
                    
                    Other OS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.10.1" data-path="../../coding/other%20OS/OpenHarmony.md">
            
                <span>
            
                    
                    Open Harmony
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10.2" data-path="../../coding/other%20OS/otherOS.md">
            
                <span>
            
                    
                    Other OS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.11" >
            
                <span>
            
                    
                    Wayland
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.11.1" data-path="../../coding/wayland/kwin.html">
            
                <a href="../../coding/wayland/kwin.html">
            
                    
                    Kwin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="../../coding/多线程/">
            
                <a href="../../coding/多线程/">
            
                    
                    多线程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.12.1" data-path="../../coding/多线程/多线程的模型.html">
            
                <a href="../../coding/多线程/多线程的模型.html">
            
                    
                    多线程的模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12.2" data-path="../../coding/多线程/线程池与binder线程池.html">
            
                <a href="../../coding/多线程/线程池与binder线程池.html">
            
                    
                    线程池与binder线程池
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="../../coding/文件系统结构/文件系统结构.html">
            
                <a href="../../coding/文件系统结构/文件系统结构.html">
            
                    
                    文件系统结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="../../coding/虚拟化/虚拟化.html">
            
                <a href="../../coding/虚拟化/虚拟化.html">
            
                    
                    虚拟化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../Naturalaw/">
            
                <a href="../../Naturalaw/">
            
                    
                    Naturalaw
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../Naturalaw/ReadingAndThinking.html">
            
                <a href="../../Naturalaw/ReadingAndThinking.html">
            
                    
                    Reading And Thinking
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../book2.html">
            
                <a href="../../book2.html">
            
                    
                    Book 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../CheckList.html">
            
                <a href="../../CheckList.html">
            
                    
                    Check List
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Start APP</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#&#x76EE;&#x5F55;"><b>1. </b>&#x76EE;&#x5F55;</a></li><li><span class="title-icon "></span><a href="#app&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;"><b>2. </b>APP&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;</a></li><ul><li><span class="title-icon "></span><a href="#0&#x5C42;&#x6A21;&#x578B;"><b>2.1. </b>0&#x5C42;&#x6A21;&#x578B;</a></li><li><span class="title-icon "></span><a href="#---&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----"><b>2.2. </b>----&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----</a></li><li><span class="title-icon "></span><a href="#&#x521B;&#x5EFA;activityrecord&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;"><b>2.3. </b>&#x521B;&#x5EFA;ActivityRecord/&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;</a></li><li><span class="title-icon "></span><a href="#&#x5904;&#x7406;activitystack-&#x9636;&#x6BB5;---------&#x603B;&#x8109;&#x7EDC;"><b>2.4. </b>&#x5904;&#x7406;ActivityStack &#x9636;&#x6BB5;  -------&#x603B;&#x8109;&#x7EDC;</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;activity&#x5148;&#x8981;pause"><b>2.5. </b>&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;Activity&#x5148;&#x8981;pause</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;ams-&#x5224;&#x65AD;-&#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;-&#x662F;&#x5426;&#x5B58;&#x5728;"><b>2.6. </b>&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;AMS &#x5224;&#x65AD; &#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;Activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B; &#x662F;&#x5426;&#x5B58;&#x5728;</a></li><ul><li><span class="title-icon "></span><a href="#ams-&#x901A;&#x77E5;-zygote&#x8FDB;&#x7A0B;"><b>2.6.1. </b>AMS &#x901A;&#x77E5; Zygote&#x8FDB;&#x7A0B;</a></li></ul><li><span class="title-icon "></span><a href="#zygoteserver-&#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;"><b>2.7. </b>ZygoteServer &#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;</a></li><ul><li><span class="title-icon "></span><a href="#&#x603B;&#x4E4B;&#xFF1A;"><b>2.7.1. </b>&#x603B;&#x4E4B;&#xFF1A;</a></li><li><span class="title-icon "></span><a href="#&#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux-fork-&#x51FD;&#x6570;"><b>2.7.2. </b>&#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux fork() &#x51FD;&#x6570;</a></li><li><span class="title-icon "></span><a href="#activitythread&#x7684;-main&#x51FD;&#x6570;&#x8D77;&#x6765;"><b>2.7.3. </b>ActivityThread&#x7684; main&#x51FD;&#x6570;&#x8D77;&#x6765;</a></li></ul><li><span class="title-icon "></span><a href="#app&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;"><b>2.8. </b>APP&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;&#xFF1A;app&#x4FA7;-handlebindapplication"><b>2.8.1. </b>&#x8865;&#x5145;&#xFF1A;APP&#x4FA7; handleBindApplication</a></li></ul><li><span class="title-icon "></span><a href="#activityb--&#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;--realstart"><b>2.9. </b>ActivityB  &#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;  realStart</a></li><ul><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;app&#x4FA7;"><b>2.9.1. </b>&#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;APP&#x4FA7;</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;&#xFF1A;app-&#x4FA7;&#x6267;&#x884C;-&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction--&#x7684;&#x6267;&#x884C;execute&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;"><b>2.9.2. </b>&#x8865;&#x5145;&#xFF1A;APP &#x4FA7;&#x6267;&#x884C; &#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction  &#x7684;&#x6267;&#x884C;execute(&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;)</a></li></ul><li><span class="title-icon "></span><a href="#&#x542F;&#x52A8;activitya&#x7684;activity-stop&#x9636;&#x6BB5;"><b>2.10. </b>&#x542F;&#x52A8;ActivityA&#x7684;Activity stop&#x9636;&#x6BB5;</a></li><li><span class="title-icon "></span><a href="#&#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;"><b>2.11. </b>&#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;</a></li><li><span class="title-icon "></span><a href="#todo"><b>2.12. </b>TODO:</a></li><li><span class="title-icon "></span><a href="#&#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;"><b>2.13. </b>&#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E3A;&#x4EC0;&#x4E48;app&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;"><b>2.13.1. </b>&#x4E3A;&#x4EC0;&#x4E48;APP&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;</a></li><li><span class="title-icon "></span><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;"><b>2.13.2. </b>&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;</a></li></ul></ul><li><span class="title-icon "></span><a href="#&#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;"><b>3. </b>&#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;</a></li></ul></div><a href="#&#x76EE;&#x5F55;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><div class="treeview__container"><ul>
<li><div><a href="#&#x76EE;&#x5F55;">&#x76EE;&#x5F55;</a><i></i></div></li>
<li><div><a href="#app&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;">APP&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#0&#x5C42;&#x6A21;&#x578B;">0&#x5C42;&#x6A21;&#x578B;</a><i></i></div></li>
<li><div><a href="#---&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----">----&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----</a><i></i></div></li>
<li><div><a href="#&#x521B;&#x5EFA;activityrecord&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;">&#x521B;&#x5EFA;ActivityRecord/&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;</a><i></i></div></li>
<li><div><a href="#&#x5904;&#x7406;activitystack-&#x9636;&#x6BB5;---------&#x603B;&#x8109;&#x7EDC;">&#x5904;&#x7406;ActivityStack &#x9636;&#x6BB5;  -------&#x603B;&#x8109;&#x7EDC;</a><i></i></div></li>
<li><div><a href="#&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;activity&#x5148;&#x8981;pause">&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;Activity&#x5148;&#x8981;pause</a><i></i></div></li>
<li><div><a href="#&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;ams-&#x5224;&#x65AD;-&#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;-&#x662F;&#x5426;&#x5B58;&#x5728;">&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;AMS &#x5224;&#x65AD; &#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;Activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B; &#x662F;&#x5426;&#x5B58;&#x5728;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#ams-&#x901A;&#x77E5;-zygote&#x8FDB;&#x7A0B;">AMS &#x901A;&#x77E5; Zygote&#x8FDB;&#x7A0B;</a><i></i></div></li>
</ul></li>
<li><div><a href="#zygoteserver-&#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;">ZygoteServer &#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#&#x603B;&#x4E4B;&#xFF1A;">&#x603B;&#x4E4B;&#xFF1A;</a><i></i></div></li>
<li><div><a href="#&#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux-fork-&#x51FD;&#x6570;">&#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux fork() &#x51FD;&#x6570;</a><i></i></div></li>
<li><div><a href="#activitythread&#x7684;-main&#x51FD;&#x6570;&#x8D77;&#x6765;">ActivityThread&#x7684; main&#x51FD;&#x6570;&#x8D77;&#x6765;</a><i></i></div></li>
</ul></li>
<li><div><a href="#app&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;">APP&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#&#x8865;&#x5145;&#xFF1A;app&#x4FA7;-handlebindapplication">&#x8865;&#x5145;&#xFF1A;APP&#x4FA7; handleBindApplication</a><i></i></div></li>
</ul></li>
<li><div><a href="#activityb--&#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;--realstart">ActivityB  &#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;  realStart</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#&#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;app&#x4FA7;">&#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;APP&#x4FA7;</a><i></i></div></li>
<li><div><a href="#&#x8865;&#x5145;&#xFF1A;app-&#x4FA7;&#x6267;&#x884C;-&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction--&#x7684;&#x6267;&#x884C;execute&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;">&#x8865;&#x5145;&#xFF1A;APP &#x4FA7;&#x6267;&#x884C; &#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction  &#x7684;&#x6267;&#x884C;execute(&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;)</a><i></i></div></li>
</ul></li>
<li><div><a href="#&#x542F;&#x52A8;activitya&#x7684;activity-stop&#x9636;&#x6BB5;">&#x542F;&#x52A8;ActivityA&#x7684;Activity stop&#x9636;&#x6BB5;</a><i></i></div></li>
<li><div><a href="#&#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;">&#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;</a><i></i></div></li>
<li><div><a href="#todo">TODO:</a><i></i></div></li>
<li><div><a href="#&#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;">&#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#&#x4E3A;&#x4EC0;&#x4E48;app&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;">&#x4E3A;&#x4EC0;&#x4E48;APP&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;</a><i></i></div></li>
<li><div><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;">&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;</a><i></i></div></li>
</ul></li>
</ul></li>
<li><div><a href="#&#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;">&#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;</a><i></i></div></li>
</ul>
</div>







<h1 id="&#x76EE;&#x5F55;"><a name="&#x76EE;&#x5F55;" class="anchor-navigation-ex-anchor" href="#&#x76EE;&#x5F55;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x76EE;&#x5F55;</h1>
<h1 id="app&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;"><a name="app&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;" class="anchor-navigation-ex-anchor" href="#app&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>2. APP&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;&#x7EB5;&#x5411;&#x4E3B;&#x7EBF;&#xFF09;</h1>
<p>&#x684C;&#x9762; ---&gt;  APP</p>
<h2 id="0&#x5C42;&#x6A21;&#x578B;"><a name="0&#x5C42;&#x6A21;&#x578B;" class="anchor-navigation-ex-anchor" href="#0&#x5C42;&#x6A21;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. 0&#x5C42;&#x6A21;&#x578B;</h2>
<p><img src="startAPP.assets/20190103210016632.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#xFF08;&#x56FE;&#xFF1A; <a href="https://blog.csdn.net/hzwailll/article/details/85339714&#xFF09;" target="_blank">https://blog.csdn.net/hzwailll/article/details/85339714&#xFF09;</a></p>
<p><img src="startAPP.assets/image-20230123203033445.png" alt="image-20230123203033445"></p>
<p>&#x56FE;&#xFF1A;startApp.eddx</p>
<p>APP&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF0C;&#x603B;&#x4E4B;&#xFF1A;
1&#x3001;&#x7687;&#x5B50;&#x7EE7;&#x4F4D;&#x6A21;&#x578B;
2&#x3001;&#x6574;&#x4E2A;&#x6A21;&#x578B;&#x7684;&#x76EE;&#x7684;&#xFF1A;fork &#x65B0;&#x8FDB;&#x7A0B;&#x3002;&#x642D;&#x5EFA;&#x4E24;&#x6761;&#x6865;&#x6881;&#xFF08;6&#x548C;8&#xFF09;</p>
<p>-<font color="red"><strong>&#x751F;&#x6D3B;&#x5316;&#x6A21;&#x578B;&#xFF1A;&#x7687;&#x5B50;&#x7EE7;&#x4F4D;&#x6A21;&#x578B;</strong></font>  &#x8BB0;&#x5FC6;&#xFF1A;</p>
<p>&#x7687;&#x5E1D;&#x60F3;&#x8981;&#x7687;&#x5B50;&#x7EE7;&#x627F;&#x7687;&#x4F4D;   -----&gt;  &#x901A;&#x77E5;&#x592A;&#x76D1;&#x603B;&#x7BA1;   -----&gt;  &#x8BA9;&#x7687;&#x5983;  ----&gt;  &#x751F;&#x7687;&#x5B50;</p>
<p>&#x4EBA;&#x7269;&#xFF1A;</p>
<blockquote>
<p>&#x7687;&#x5E1D;&#xFF0C;&#x63A7;&#x5236;&#x751F;&#x6B7B;&#xFF1A;Launcher&#x8FDB;&#x7A0B;&#xFF0C;&#x5176;&#x4ED6;APP&#x8FDB;&#x7A0B;&#x7684;&#x751F;&#x6B7B;  <strong>&#x63A7;&#x5236;&#x8005;</strong>
&#x592A;&#x76D1;&#x603B;&#x7BA1;&#xFF0C;<strong>&#x4F20;&#x9012;</strong>&#x7687;&#x5E1D;&#x65E8;&#x610F;&#x3001;<strong>&#x7BA1;&#x7406;</strong>&#x5BAB;&#x91CC;&#x6240;&#x6709;&#x4EBA;:<br>&#x7687;&#x5983;&#xFF0C;<strong>&#x751F;&#x5B50;</strong>:  fork&#x51FA;&#x65B0;&#x7684;app&#x8FDB;&#x7A0B;
&#x7687;&#x5B50;&#xFF0C;&#x6210;&#x957F;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x4EBA;:  APP&#x521B;&#x5EFA;&#x9875;&#x9762;&#x7B49;&#x7B49;
&#x9F99;&#x888D;&#xFF1A;activity
&#x7EE7;&#x4F4D;&#xFF1A;&#x9F99;&#x888D;&#x5904;&#x4E8E;&#x6C11;&#x4F17;&#x9762;&#x524D;&#xFF08;activity&#x524D;&#x53F0;&#x4F4D;&#x7F6E;&#xFF09;</p>
<p>&#x6C11;&#x4F17;&#xFF1A;&#x624B;&#x673A;&#x4F7F;&#x7528;&#x8005;</p>
<p>&#x8054;&#x7CFB;&#x65B9;&#x5F0F;ApplicationThreadProxy&#xFF0C;&#x672C;&#x8D28;&#x662F;Binder</p>
</blockquote>
<p><strong>&#x663E;&#x7136;&#xFF0C;&#x57FA;&#x4E8E;&#x751F;&#x6D3B;&#x6A21;&#x578B;&#xFF0C;&#x4E0D;&#x5F97;&#x4E0D;&#x7684;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;:</strong></p>
<p><del>1&#x3001;&#x7687;&#x5E1D;&#x3001;&#x603B;&#x7BA1;&#x3001;&#x7687;&#x5983;&#x5728;&#x5EFA;&#x56FD;&#x65F6;(<strong>&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x65F6;</strong>) &#x624D;&#x6709;&#x7684;</del>  -----&gt;  &#x81EA;&#x7136;</p>
<p><del>2&#x3001;&#x7687;&#x5E1D;&#x548C;&#x7687;&#x5B50;&#x90FD;&#x53EF;&#x4EE5;&#x4F20;&#x5524; &#x592A;&#x76D1;&#x603B;&#x7BA1;:   &#x6240;&#x4EE5;&#x90FD;&#x6301;&#x6709; &#x603B;&#x7BA1;&#x7684;&#x5F15;&#x7528; ActivityManagerProxy</del>  -----&gt;  &#x81EA;&#x7136;</p>
<p>&#x200B;     <del>&#x53CD;&#x8FC7;&#x6765;&#xFF0C;&#x603B;&#x7BA1;&#x4E5F;&#x80FD;&#x8054;&#x7CFB; &#x7687;&#x5E1D; &#x548C;&#x7687;&#x5B50;&#xFF1A;&#x901A;&#x8FC7; &#x8054;&#x7CFB;&#x65B9;&#x5F0F;Binder</del>    -----&gt;  &#x81EA;&#x7136;</p>
<p><del>3&#x3001;&#x7687;&#x5B50;&#x751F;&#x4E0B;&#x6765;&#x4E4B;&#x540E;&#xFF0C;&#x7EE7;&#x627F;&#x7687;&#x4F4D;&#x4E8B;&#x5B9C;&#xFF1A;&#x542F;&#x52A8;&#x81EA;&#x5DF1;&#x7684;&#x9A74;&#x62C9;&#x78E8;Looper&#x3001;&#x957F;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x8138;Acitivity</del>   -----&gt;  &#x81EA;&#x7136;</p>
<p>4&#x3001;<del>&#x603B;&#x7BA1;  &#x7BA1;&#x7406;&#x6240;&#x6709;&#x7687;&#x5BB6;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;Binder&#xFF0C;&#x4ECE;&#x800C;&#x603B;&#x7BA1; &#x53EF;&#x4EE5;&#x627E;&#x5230; &#x4EFB;&#x4F55;&#x7687;&#x5BA4;&#x6210;&#x5458;</del>   -----&gt;  &#x81EA;&#x7136;</p>
<p>5&#x3001;&#x7687;&#x5E1D;&#x548C;&#x7687;&#x5B50;&#xFF0C;&#x672C;&#x8D28;&#x662F;&#x4E00;&#x4E2A;&#x4E1C;&#x897F;&#xFF1A;APP&#x8FDB;&#x7A0B;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x548C;AMS &#x7684;&#x4E24;&#x6761;&#x6865;&#x6881;&#x662F;&#x4E00;&#x6837;&#x7684;  ---&gt;  &#x81EA;&#x7136;</p>
<p>6&#x3001;&#x4E3A;&#x5565;&#x7687;&#x5983;&#x4E0E;&#x5916;&#x754C;&#x7684;&#x8054;&#x7CFB;&#x90FD;&#x662F;socket&#xFF1F;</p>
<p>7&#x3001;&#x5316;&#x7B80;&#x6865;&#x6881;1&#x548C;2&#xFF1A;&#x81EA;&#x7136;&#xFF0C;<del>&#x7687;&#x5E1D;&#x548C;&#x7687;&#x5B50;&#xFF0C;&#x4E0E;AMS&#x8054;&#x7CFB;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF1A;1&#x4E0E;6&#x65E0;&#x5DEE;&#x5F02;&#xFF0C;2&#x4E0E;8&#x65E0;&#x5DEE;&#x5F02;</del></p>
<p><strong>&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#xFF1A;</strong></p>
<p>&#x7687;&#x5E1D; &#x60F3;&#x8981;  &#x7687;&#x5B50;APP1&#x7EE7;&#x627F;&#x7687;&#x4F4D;&#xFF0C;</p>
<ol>
<li><del>&#x7687;&#x5E1D;&#x901A;&#x77E5; &#x592A;&#x76D1;&#x603B;&#x7BA1;&#x6765;&#x5B89;&#x6392;&#xFF08;AMS&#xFF09;</del>&#x3002;&#x81EA;&#x7136;&#xFF0C;<del>startActivity</del></li>
<li><del>&#x592A;&#x76D1;&#x603B;&#x7BA1;&#x901A;&#x77E5;&#x8001;&#x7687;&#x5E1D;&#x51C6;&#x5907;&#x9000;&#x4F4D;&#xFF08;launcher&#x7684;&#x9EC4;&#x888D;Acitivity&#x5230;paused&#x72B6;&#x6001;&#xFF09;</del>  -----&gt;   &#x81EA;&#x7136; 
&#xFF08;2&#xFF09; <del>&#x592A;&#x76D1;&#x603B;&#x7BA1; &#x627E;&#x5BF9;&#x5E94;&#x7684;&#x7687;&#x5B50; &#xFF0C;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x81EA;&#x7136;&#x662F;&#x65B0;&#x7687;&#x5B50;&#x7EE7;&#x627F;&#x7687;&#x4F4D;&#xFF08;&#x7687;&#x5B50;activity&#x5230;&#x524D;&#x53F0;&#xFF09;&#xFF0C;&#x76F4;&#x63A5;scheduleLaunchActivity&#xFF0C;&#x6CA1;&#x6709;socket&#x548C;fork&#x3002;<font color="red">&#x6240;&#x6709;&#x6D41;&#x7A0B;&#x7ED3;&#x675F;</font></del> -----&gt;  &#x81EA;&#x7136;</li>
</ol>
<p>&#x200B;                                                      <del>&#x5982;&#x679C;&#x6CA1;&#x627E;&#x5230;&#xFF0C;&#x592A;&#x76D1;&#x603B;&#x7BA1;&#x5B89;&#x6392;&#x7687;&#x5983;Zygote&#x6765;&#x751F;&#x7687;&#x5B50;</del>     -----&gt;  &#x81EA;&#x7136;</p>
<p>&#xFF08;3&#xFF09;&#x7687;&#x5983;&#x751F;&#x7687;&#x5B50;&#xFF0C;&#x7687;&#x5B50;&#x8BDE;&#x751F;&#xFF08;Zygote  fork&#x51FA;&#x65B0;&#x8FDB;&#x7A0B;APP1&#x8FDB;&#x7A0B;&#xFF09;</p>
<p>&#xFF08;4&#xFF09;&#x7687;&#x5B50;&#x751F;&#x4E0B;&#x6765;&#x540E;&#xFF0C;&#x7B2C;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#x662F;&#xFF1A;&#x5F00;&#x59CB;&#x751F;&#x957F;&#xFF1A;&#x751F;&#x957F;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x9AA8;&#x67B6;(&#x9A74;&#x62C9;&#x78E8;Looper)&#xFF0C;<strong>&#x4F46;&#x662F;&#x6B64;&#x65F6;&#x9F99;&#x888D;&#x80AF;&#x5B9A;&#x8FD8;&#x6CA1;&#x505A;&#xFF0C;</strong>  &#x6CA1;&#x90A3;&#x4E48;&#x7740;&#x6025;</p>
<p>&#xFF08;5&#xFF09;&#x7687;&#x5B50;&#x751F;&#x4E0B;&#x6765;&#x540E;&#xFF0C;&#x7B2C;&#x4E8C;&#x4EF6;&#x4E8B;&#x60C5;&#x662F;&#xFF1A;&#x5411;&#x603B;&#x7BA1;&#x6CE8;&#x518C;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;ApplicationThread&#xFF0C;&#x4ECE;&#x800C;&#x603B;&#x7BA1;&#x53EF;&#x4EE5;&#x8054;&#x7CFB;&#x4ED6;</p>
<p>&#xFF08;6&#xFF09;&#x603B;&#x7BA1;&#x77E5;&#x9053;&#x7687;&#x5B50;&#x5DF2;&#x7ECF;&#x8BDE;&#x751F;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x603B;&#x7BA1;&#x901A;&#x8FC7; &#x8054;&#x7CFB;&#x65B9;&#x5F0F;Binder &#x901A;&#x77E5;&#x7687;&#x5B50;   &#x8BA1;&#x5212;&#x5B89;&#x6392;&#xFF08; shedule&#xFF09;&#x65B0;&#x7687;&#x5B50;&#x7EE7;&#x4F4D; shedulelaunchActivity</p>
<p>&#xFF08;7&#xFF09;&#x5BF9;&#x4E8E;&#x7687;&#x5B50;&#x8FD9;&#x8FB9;&#xFF0C;&#x5C31;&#x5904;&#x7406;&#x7EE7;&#x627F;&#x7687;&#x4F4D;&#x7684;&#x4E00;&#x4E9B;&#x4E8B;&#x5B9C;handleLaunchActivity&#xFF1A;&#x5236;&#x4F5C;&#x81EA;&#x5DF1;&#x7684;&#x9F99;&#x888D;Acitivity.onCreate(&#x5728;&#x8FD9;&#x4E2A;&#x6D41;&#x7A0B;&#x91CC;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x5404;&#x79CD;&#x5404;&#x6837;&#x9F99;&#x888D;&#xFF0C;&#x8C6A;&#x88C5;&#x8FD8;&#x662F;&#x7B80;&#x88C5;&#x90FD;&#x53EF;&#x4EE5;)  </p>
<p>&#xFF08;8&#xFF09;&#x9F99;&#x888D;Acitivity&#xFF0C;&#x5230;&#x4E86;&#x524D;&#x53F0;&#xFF0C;&#x88AB;&#x6C11;&#x4F17;&#x770B;&#x89C1;&#xFF0C;&#x5C31;&#x7EE7;&#x627F;&#x7687;&#x4F4D;&#x5B8C;&#x6BD5;&#x3002;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x7ED3;&#x675F;    -----&gt;  &#x81EA;&#x7136;  </p>
<p>&#xFF08;9&#xFF09;&#x65B0;&#x7687;&#x5E1D;&#x5B8C;&#x6210;&#x4E86;&#x767B;&#x57FA;&#x7684;&#x6240;&#x6709;&#x4E8B;&#x60C5;&#xFF0C;&#x5C31;&#x901A;&#x77E5;&#x603B;&#x7BA1;&#xFF0C;&#x8BA9;&#x8001;&#x7687;&#x5E1D;&#x4E0D;&#x8981;&#x518D;&#x54D4;&#x54D4;&#x4E86;Stop    -----&gt;  &#x81EA;&#x7136;  </p>
<p><img src="startAPP.assets/image-20221122001003484.png" alt="image-20221122001003484"></p>
<p><strong>&#x7591;&#x95EE;&#x70B9;&#xFF1A;</strong></p>
<p>&#x4E3A;&#x5565; &#x603B;&#x7BA1; &#x901A;&#x77E5;&#x7687;&#x5983;  &#x901A;&#x8FC7;socket &#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;&#x4EA7;&#x5B50;&#x4E5F;&#x662F;</p>
<p>Activity&#x542F;&#x52A8;&#xFF1A;
&#x540C;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;(ActivityA &#x542F;&#x52A8; ActivityB)
&#x8FDB;&#x7A0B;&#x95F4;&#x542F;&#x52A8;(launcher&#x542F;&#x52A8; ActivityB)&#xFF1A;&#x6D89;&#x53CA;&#x5230;&#x65B0;&#x8FDB;&#x7A0B;&#x7684;&#x542F;&#x52A8;fork</p>
<h2 id="---&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----"><a name="---&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----" class="anchor-navigation-ex-anchor" href="#---&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. ----&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x6709;&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x53D9;&#x8FF0;-----</h2>
<p>-<font color="red">&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x662F; &#x951A;&#xFF0C;&#x6302;&#x6EE1;&#x4E86;&#x6240;&#x6709;&#x903B;&#x8F91;</font></p>
<p>&#x6700;&#x7EC8;&#x76EE;&#x6807;&#xFF1A;&#x771F;&#x6B63;&#x7684;&#x542F;&#x52A8;ActivityB</p>
<h2 id="&#x521B;&#x5EFA;activityrecord&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;"><a name="&#x521B;&#x5EFA;activityrecord&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;" class="anchor-navigation-ex-anchor" href="#&#x521B;&#x5EFA;activityrecord&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. &#x521B;&#x5EFA;ActivityRecord/&#x89E3;&#x6790;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x9636;&#x6BB5;</h2>
<p><strong>&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;(&#x771F;&#x6B63;&#x7684;&#x542F;&#x52A8;ActivityB),</strong> 
&#x6240;&#x4EE5;&#x4E3A;&#x5176;&#x521B;&#x5EFA; &#x76EE;&#x6807; ActivityRecord&#xFF0C;&#x5E76;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684; ActivityStack&#xFF08;<font color="cornflowerblue">&#x81EA;&#x7136;&#xFF0C;&#x4EA4;&#x7ED9;&#x5176;&#x53BB;&#x5904;&#x7406;</font>&#xFF09;</p>
<p><img src="startAPP.assets/image-20230128213724426.png" alt="image-20230128213724426"></p>
<p>&#x6CE8;&#xFF1A;Mainactivty.startActivity(Intent) &#x662F;APP&#x4F7F;&#x7528;&#x7684;&#x5165;&#x53E3;&#xFF08;&#x719F;&#x6089;&#x7684;&#x5165;&#x53E3;&#xFF09;</p>
<p><del>&#x539F;&#x6765;ATMS&#x5C31;&#x662F;AMS&#x4E00;&#x90E8;&#x5206;, &#x5728;&#x610F;&#x8BC6;&#x91CC;&#x4E0D;&#x8981;&#x5206;&#x5F00;</del>&#xFF08;&#x4E0D;&#x8981;&#x533A;&#x5206;&#x4E24;&#x8005;&#xFF0C;ATMS&#x7BA1;&#x7406;Activity&#xFF0C;&#x8FD9;&#x91CC;&#x81EA;&#x7136;&#x662F;ATMS&#xFF09;</p>
<p>ATMS&#x662F;&#x7BA1;&#x7406;Activity&#x7684;&#xFF0C;&#x5176;&#x4E2D; ActivityStartController &#x7BA1;&#x7406;&#x542F;&#x52A8;&#x529F;&#x80FD;start&#xFF08;&#x800C;&#x4E14;&#x662F;&#x5F88;&#x591A;Activity&#x7684;&#xFF09;   ---&#x300B; &#x81EA;&#x7136;</p>
<p>&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF1A;</p>
<blockquote>
<p>ATMS:&#x7BA1;&#x7406; &#x6240;&#x6709;Activity&#x7684;&#x6240;&#x6709;&#x529F;&#x80FD;  ---&gt;  ActivityStartController &#x7BA1;&#x7406;&#x6240;&#x6709;Activity&#x542F;&#x52A8;&#x529F;&#x80FD;start  ---&gt;     ActivityStarter&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;Activity&#x7684;start</p>
</blockquote>
<p><strong>&#x8BE5;&#x9636;&#x6BB5;&#x6838;&#x5FC3;&#x7C7B;&#xFF1A;</strong>
ActivityStarter   ---&gt;  &#x81EA;&#x7136;&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x8D1F;&#x8D23;&#x542F;&#x52A8;&#x6D41;&#x7A0B;</p>
<p><strong>&#x5173;&#x952E;&#x51FD;&#x6570;&#xFF1A;</strong></p>
<p>&#x76EE;&#x6807; ActivityRecord&#x521B;&#x5EFA;&#xFF1A;   ActivityStarter.startActivity()  &#x4E3A;&#x5F85;&#x542F;&#x52A8;&#x7684;Activity&#x521B;&#x5EFA;  ActivityRecord()</p>
<p>&#x6E90; ActivityRecord&#x7684;&#x5BFB;&#x627E;&#xFF1A;sourceRecord = mRootActivityContainer.isInAnyStack(IBinder token);  &#x901A;&#x8FC7;token&#x627E;&#x5230;</p>
<p>TODO:  &#x76EE;&#x6807; ActivityRecord &#x5BF9;&#x5E94;&#x7684; ActivityStack &#xFF0C;&#x5373;targetStack&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;</p>
<p>TODO:  &#x6309;&#x9053;&#x7406;&#x6B64;&#x65F6;&#x4F1A;&#x6709;&#x5F88;&#x591A; &#x6808;&#x7BA1;&#x7406;&#x3002;&#x6BD4;&#x5982;resumeFocusedStacksTopActivities&#x8FC7;&#x7A0B;&#x3002;&#x4EE3;&#x7801;&#x7EA7;&#x5206;&#x6790; &#x6808;&#x7BA1;&#x7406;</p>
<p>TODO:  &#x56FE;&#x4E2D;&#xFF0C;&#x542F;&#x52A8;&#x9ED1;&#x767D;&#x5C4F;&#x6D41;&#x7A0B;
----&#x300B;  APP&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#x4F18;&#x5316;&#x8BFE;&#x7A0B;</p>
<p>TODO:
mIntent&#x7684;&#x6D41;&#x8F6C;&#x6D41;&#x7A0B;</p>
<h2 id="&#x5904;&#x7406;activitystack-&#x9636;&#x6BB5;---------&#x603B;&#x8109;&#x7EDC;"><a name="&#x5904;&#x7406;activitystack-&#x9636;&#x6BB5;---------&#x603B;&#x8109;&#x7EDC;" class="anchor-navigation-ex-anchor" href="#&#x5904;&#x7406;activitystack-&#x9636;&#x6BB5;---------&#x603B;&#x8109;&#x7EDC;"><i class="fa fa-link" aria-hidden="true"></i></a>2.4. &#x5904;&#x7406;ActivityStack &#x9636;&#x6BB5;  -------&#x603B;&#x8109;&#x7EDC;</h2>
<p><strong>&#x56F4;&#x7ED5;&#x6700;&#x7EC8;&#x76EE;&#x6807;(&#x771F;&#x6B63;&#x7684;&#x542F;&#x52A8;ActivityB),</strong> 
&#x6240;&#x4EE5;&#x4E3A;&#x5176;&#x521B;&#x5EFA; &#x76EE;&#x6807; ActivityRecord&#xFF0C;----&#x300B; &#x81EA;&#x7136;&#x4EA4;&#x7ED9; AMS &#x8457;&#x540D;&#x7684;&#x6808;&#x7BA1;&#x7406;</p>
<p><img src="startAPP.assets/image-20230212235430468.png" alt="image-20230212235430468"></p>
<p>&#x7531;ActivityStack  &#x7BA1;&#x7406;&#x548C;&#x542F;&#x52A8; ActivityB</p>
<p><strong>&#x8BE5;&#x9636;&#x6BB5;&#x6838;&#x5FC3;&#x7C7B;&#xFF1A;</strong>
ActivityStack  ---&#x300B; &#x7BA1;&#x7406; activity&#x6808;&#x7684;</p>
<p><strong>&#x5173;&#x952E;&#x51FD;&#x6570;&#xFF1A;</strong></p>
<p>&#x8BB0;&#x5FC6;&#xFF0C;&#x603B;&#x4E4B;&#xFF1A;<font color="red">&#x4E24;&#x4E2A;&#x95EE;&#x9898;</font></p>
<p>1&#x3001;&#x5B9E;&#x9645;&#x4E0A; resume&#x51FD;&#x6570;&#x8FDB;&#x6765;&#x4E24;&#x6B21;&#xFF0C;&#x4E3A;&#x5565;&#x5462;&#xFF1F;
&#x56E0;&#x4E3A;&#x7B2C;&#x4E00;&#x6B21;&#x8FDB;&#x6765;&#xFF0C;&#x53D1;&#x73B0;&#x95EE;&#x9898; &#x3010;1&#x3011;&#xFF1A; &#x8001;&#x7684;Activity&#x8FD8;&#x5728;&#x53EF;&#x4EA4;&#x4E92;&#xFF0C;&#x5148;pause&#x4E00;&#x628A;</p>
<p>&#x7B2C;&#x4E8C;&#x6B21;&#x8FDB;&#x6765;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x53D1;&#x73B0;&#x95EE;&#x9898; &#x3010;2&#x3011;&#xFF1A;&#x65B0;&#x7684;process&#x8FD8;&#x4E0D;&#x5B58;&#x5728;</p>
<p>&#x4F46;&#x7B2C;&#x4E09;&#x6B21;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x4ECE;resume&#x8FDB;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x5230;&#x4E86; 14 realStartartActivity</p>
<p>2&#x3001;&#x4E0A;&#x8FF0;&#x56FE;&#x753B;&#x7684;&#x4E0D;&#x662F;&#x8C03;&#x7528;&#x5173;&#x7CFB;&#xFF0C;&#x53EA;&#x662F;&#x65F6;&#x95F4;&#x4E0A;&#x7684;</p>
<p>3&#x3001;&#x5B9E;&#x9645;&#x4E0A;&#x6D89;&#x53CA;&#x5230;&#x5F88;&#x591A;&#x7EBF;&#x7A0B;&#xFF08;&#x56FE;&#x4E2D;&#x53EA;&#x4F53;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#xFF09;</p>
<p>&#x8BC1;&#x660E;&#xFF1A;</p>
<pre class="language-"><code class="lang-java">&#x76EE;&#x6807;&#xFF1A;&#x771F;&#x6B63;&#x7684;&#x542F;&#x52A8;<span class="token class-name">ActivityB</span>

<span class="token comment">//&#x7B2C;&#x4E00;&#x6B21;resume&#xFF1A;  &#x5173;&#x6CE8;&#x89E6;&#x53D1;&#x70B9; &#x548C; &#x7EC8;&#x6B62;&#x70B9;</span>
<span class="token class-name">Breakpoint</span> reached
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStack</span><span class="token punctuation">.</span><span class="token function">resumeTopActivityInnerLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStack</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2625</span><span class="token punctuation">)</span>  <span class="token comment">// &#x7EC8;&#x6B62;&#x70B9;: &#x542F;&#x52A8;&#x65B0;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53D1;&#x73B0;&#x95EE;&#x9898; &#x3010;1&#x3011;&#xFF1A;&#x53D1;&#x73B0;&#x65E7;&#x7684;&#x8FD8;&#x5728;&#xFF0C;&#x65E7;&#x7684;&#x5148;&#x8981;pause&#x5440; ---&#x300B; &#x6240;&#x4EE5;&#xFF0C;&#x8DD1;&#x53BB;pause</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStack</span><span class="token punctuation">.</span><span class="token function">resumeTopActivityUncheckedLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStack</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2575</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>RootActivityContainer</span><span class="token punctuation">.</span><span class="token function">resumeFocusedStacksTopActivities</span><span class="token punctuation">(</span><span class="token class-name">RootActivityContainer</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1158</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStarter</span><span class="token punctuation">.</span><span class="token function">startActivityUnchecked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1728</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStarter</span><span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token class-name">ActivityStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1394</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStarter</span><span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token class-name">ActivityStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">933</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStarter</span><span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token class-name">ActivityStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">583</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStarter</span><span class="token punctuation">.</span><span class="token function">startActivityMayWait</span><span class="token punctuation">(</span><span class="token class-name">ActivityStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1288</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStarter</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">ActivityStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">514</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityTaskManagerService</span><span class="token punctuation">.</span><span class="token function">startActivityAsUser</span><span class="token punctuation">(</span><span class="token class-name">ActivityTaskManagerService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1058</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityTaskManagerService</span><span class="token punctuation">.</span><span class="token function">startActivityAsUser</span><span class="token punctuation">(</span><span class="token class-name">ActivityTaskManagerService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1032</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityTaskManagerService</span><span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token class-name">ActivityTaskManagerService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1009</span><span class="token punctuation">)</span>  <span class="token comment">//  &#x89E6;&#x53D1;&#x70B9;&#xFF1A; laucher&#x6216;&#x5176;&#x4ED6;&#x5E94;&#x7528;StartActvity</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>IActivityTaskManager</span>$<span class="token class-name">Stub</span><span class="token punctuation">.</span><span class="token function">onTransact</span><span class="token punctuation">(</span><span class="token class-name">IActivityTaskManager</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1486</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Binder</span><span class="token punctuation">.</span><span class="token function">execTransactInternal</span><span class="token punctuation">(</span><span class="token class-name">Binder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1021</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Binder</span><span class="token punctuation">.</span><span class="token function">execTransact</span><span class="token punctuation">(</span><span class="token class-name">Binder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">994</span><span class="token punctuation">)</span>
sub <span class="token class-name">Thread</span>  name is <span class="token class-name">Binder</span><span class="token operator">:</span><span class="token number">8184_2</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">09</span> <span class="token number">13</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">016</span>

<span class="token comment">//&#x7B2C;&#x4E8C;&#x6B21; resume&#xFF1A;</span>
<span class="token class-name">Breakpoint</span> reached
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStack</span><span class="token punctuation">.</span><span class="token function">resumeTopActivityInnerLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStack</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2625</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStack</span><span class="token punctuation">.</span><span class="token function">resumeTopActivityUncheckedLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStack</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2575</span><span class="token punctuation">)</span><span class="token comment">// &#x3010;2&#x3011;&#x7EC8;&#x6B62;&#x70B9;: &#x53C8;&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#x90FD;&#x6CA1;&#x6709;&#x5462;----&#x300B;&#x8DD1;&#x53BB;&#x521B;&#x5EFA;process</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>RootActivityContainer</span><span class="token punctuation">.</span><span class="token function">resumeFocusedStacksTopActivities</span><span class="token punctuation">(</span><span class="token class-name">RootActivityContainer</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1158</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStack</span><span class="token punctuation">.</span><span class="token function">completePauseLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStack</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1839</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStack</span><span class="token punctuation">.</span><span class="token function">activityPausedLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStack</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1766</span><span class="token punctuation">)</span>   <span class="token comment">// &#x89E6;&#x53D1;&#x70B9;&#xFF1A; &#x524D;&#x4E00;&#x4E2A;activityPaused</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStack</span>$<span class="token class-name">ActivityStackHandler</span><span class="token punctuation">.</span><span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token class-name">ActivityStack</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">451</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Handler</span><span class="token punctuation">.</span><span class="token function">dispatchMessage</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">107</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Looper</span><span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token class-name">Looper</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">214</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>HandlerThread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HandlerThread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">67</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span>ServiceThread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ServiceThread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">)</span>
sub <span class="token class-name">Thread</span>  name is android<span class="token punctuation">.</span>display<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">09</span> <span class="token number">13</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">29</span><span class="token operator">:</span><span class="token number">041</span>  <span class="token comment">// display&#x7EBF;&#x7A0B;</span>

<span class="token comment">//&#x65B0;&#x7684;process&#x521B;&#x5EFA;&#x540E;&#xFF0C;attachApplication</span>
<span class="token class-name">Breakpoint</span> reached
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityStackSupervisor</span><span class="token punctuation">.</span><span class="token function">realStartActivityLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityStackSupervisor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">708</span><span class="token punctuation">)</span><span class="token comment">// &#x3010;3&#x3011;&#x6700;&#x7EC8;&#x771F;&#x6B63;StartActivity&#x7684;&#x5730;&#x65B9;&#xFF01;&#xFF01;&#xFF01;&#xFF01;&#xFF01;&#xFF01;&#xFF01;&#xFF01;</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>RootActivityContainer</span><span class="token punctuation">.</span><span class="token function">attachApplication</span><span class="token punctuation">(</span><span class="token class-name">RootActivityContainer</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">783</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">.</span></span>ActivityTaskManagerService</span>$<span class="token class-name">LocalService</span><span class="token punctuation">.</span><span class="token function">attachApplication</span><span class="token punctuation">(</span><span class="token class-name">ActivityTaskManagerService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">6869</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>am<span class="token punctuation">.</span></span>ActivityManagerService</span><span class="token punctuation">.</span><span class="token function">attachApplicationLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityManagerService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">5103</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>am<span class="token punctuation">.</span></span>ActivityManagerService</span><span class="token punctuation">.</span><span class="token function">attachApplication</span><span class="token punctuation">(</span><span class="token class-name">ActivityManagerService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">5180</span><span class="token punctuation">)</span><span class="token comment">// &#x89E6;&#x53D1;&#x70B9;&#xFF1A;&#x65B0;&#x7684;process&#x521B;&#x5EFA;&#x540E;&#xFF0C;attachApplication</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>IActivityManager</span>$<span class="token class-name">Stub</span><span class="token punctuation">.</span><span class="token function">onTransact</span><span class="token punctuation">(</span><span class="token class-name">IActivityManager</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2003</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>am<span class="token punctuation">.</span></span>ActivityManagerService</span><span class="token punctuation">.</span><span class="token function">onTransact</span><span class="token punctuation">(</span><span class="token class-name">ActivityManagerService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2741</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Binder</span><span class="token punctuation">.</span><span class="token function">execTransactInternal</span><span class="token punctuation">(</span><span class="token class-name">Binder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1021</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Binder</span><span class="token punctuation">.</span><span class="token function">execTransact</span><span class="token punctuation">(</span><span class="token class-name">Binder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">994</span><span class="token punctuation">)</span>
sub <span class="token class-name">Thread</span>  name is <span class="token class-name">Binder</span><span class="token operator">:</span><span class="token number">8184_13</span><span class="token punctuation">,</span> <span class="token number">228</span><span class="token punctuation">,</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">09</span> <span class="token number">13</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">361</span>
</code></pre>
<h2 id="&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;activity&#x5148;&#x8981;pause"><a name="&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;activity&#x5148;&#x8981;pause" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;activity&#x5148;&#x8981;pause"><i class="fa fa-link" aria-hidden="true"></i></a>2.5. &#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;1&#x3011;&#xFF1A;&#x65E7;&#x7684;Activity&#x5148;&#x8981;pause</h2>
<p>TODO  &#x7B80;&#x7565;</p>
<p>&#x89E6;&#x53D1;&#x70B9;&#xFF1A;startActivty&#x4E4B;&#x524D;&#xFF0C;&#x5148;pause&#x8001;&#x7684;</p>
<p>&#x7ED3;&#x679C;&#xFF1A;puased&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x7EE7;&#x7EED;&#x8D70;resume&#x65B0;&#x7684;</p>
<h2 id="&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;ams-&#x5224;&#x65AD;-&#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;-&#x662F;&#x5426;&#x5B58;&#x5728;"><a name="&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;ams-&#x5224;&#x65AD;-&#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;-&#x662F;&#x5426;&#x5B58;&#x5728;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;ams-&#x5224;&#x65AD;-&#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B;-&#x662F;&#x5426;&#x5B58;&#x5728;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6. &#x8865;&#x5145;&#x95EE;&#x9898;&#x3010;2&#x3011;&#xFF1A;AMS &#x5224;&#x65AD; &#x6240;&#x8981;&#x542F;&#x52A8;&#x7684;Activity&#x5BF9;&#x5E94;&#x7684;&#x8FDB;&#x7A0B; &#x662F;&#x5426;&#x5B58;&#x5728;</h2>
<p>&#x81EA;&#x7136;&#xFF1A;&#x542F;&#x52A8;ActivityB&#xFF0C;&#x53D1;&#x73B0;&#x7684;&#x95EE;&#x9898;</p>
<p>&#x903B;&#x8F91;&#xFF1A;</p>
<blockquote>
<p>&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF0C;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x3002;&#x5373;0&#x5C42;&#x67B6;&#x6784;&#x56FE;&#x4E2D;&#x7684;  7&#x548C;8</p>
<p><img src="startAPP.assets/image-20230126024438073.png" alt="image-20230126024438073"></p>
<p>&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219; &#x901A;&#x77E5; zygote&#x8FDB;&#x7A0B;&#x53BB;fork&#x4E00;&#x4E2A;&#x65B0;&#x7684;APP&#x8FDB;&#x7A0B;</p>
</blockquote>
<p>&#x8C03;&#x7528;&#x6808;&#xFF1A;</p>
<blockquote>
<pre class="language-"><code class="lang-java"><span class="token class-name">Binder</span>&#x7EBF;&#x7A0B;&#xFF1A;
startSpecificActivityLocked<span class="token operator">:</span><span class="token number">961</span><span class="token punctuation">,</span> <span class="token class-name">ActivityStackSupervisor</span> <span class="token punctuation">(</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">)</span> <span class="token comment">// &#x6808;&#x7BA1;&#x7406;&#x5224;&#x65AD;</span>
resumeTopActivityInnerLocked<span class="token operator">:</span><span class="token number">3037</span><span class="token punctuation">,</span> <span class="token class-name">ActivityStack</span> <span class="token punctuation">(</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">)</span>
resumeTopActivityUncheckedLocked<span class="token operator">:</span><span class="token number">2575</span><span class="token punctuation">,</span> <span class="token class-name">ActivityStack</span> <span class="token punctuation">(</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">)</span>
resumeFocusedStacksTopActivities<span class="token operator">:</span><span class="token number">1158</span><span class="token punctuation">,</span> <span class="token class-name">RootActivityContainer</span> <span class="token punctuation">(</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">)</span>  <span class="token comment">// &#x6838;&#x5FC3;&#xFF1F;&#xFF1F;&#xFF1F;</span>
completePauseLocked<span class="token operator">:</span><span class="token number">1839</span><span class="token punctuation">,</span> <span class="token class-name">ActivityStack</span> <span class="token punctuation">(</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">)</span>
activityPausedLocked<span class="token operator">:</span><span class="token number">1766</span><span class="token punctuation">,</span> <span class="token class-name">ActivityStack</span> <span class="token punctuation">(</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">)</span>
activityPaused<span class="token operator">:</span><span class="token number">1699</span><span class="token punctuation">,</span> <span class="token class-name">ActivityTaskManagerService</span> <span class="token punctuation">(</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>server<span class="token punctuation">.</span>wm<span class="token punctuation">)</span>  <span class="token comment">//&#x3010;1&#x3011;</span>
onTransact<span class="token operator">:</span><span class="token number">1981</span><span class="token punctuation">,</span> <span class="token class-name">IActivityTaskManager</span>$<span class="token class-name">Stub</span> <span class="token punctuation">(</span>android<span class="token punctuation">.</span>app<span class="token punctuation">)</span>
execTransactInternal<span class="token operator">:</span><span class="token number">1021</span><span class="token punctuation">,</span> <span class="token class-name">Binder</span> <span class="token punctuation">(</span>android<span class="token punctuation">.</span>os<span class="token punctuation">)</span>
execTransact<span class="token operator">:</span><span class="token number">994</span><span class="token punctuation">,</span> <span class="token class-name">Binder</span> <span class="token punctuation">(</span>android<span class="token punctuation">.</span>os<span class="token punctuation">)</span>
</code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF1A;<br>1&#x3001;&#x5FC5;&#x987B;&#x8981;&#x7B49;&#x8001;&#x7687;&#x5E1D;paused&#xFF0C;&#x624D;&#x4F1A;  resumeTopActivity  &#xFF0C;&#x81EA;&#x7136;
2&#x3001; <del>resumeTopActivity&#x53D1;&#x73B0;&#x6CA1;&#x6709;&#xFF0C;&#x624D;fork&#x65B0;&#x8FDB;&#x7A0B;&#x7684;</del>&#xFF0C;&#x81EA;&#x7136;</p>
</blockquote>
<p>&#x5BF9;&#x5E94;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre class="language-"><code class="lang-java">    <span class="token keyword">void</span> <span class="token function">startSpecificActivityLocked</span><span class="token punctuation">(</span><span class="token class-name">ActivityRecord</span> r<span class="token punctuation">,</span> <span class="token keyword">boolean</span> andResume<span class="token punctuation">,</span> <span class="token keyword">boolean</span> checkConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Is this activity&apos;s application already running?</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>wpc <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> wpc<span class="token punctuation">.</span><span class="token function">hasThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// cg: if APP process is created, start APP Activity directly</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token function">realStartActivityLocked</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> wpc<span class="token punctuation">,</span> andResume<span class="token punctuation">,</span> checkConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> 
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            <span class="token comment">// Post message to start process to avoid possible deadlock of calling into AMS with the</span>
            <span class="token comment">// ATMS lock held.</span>
            <span class="token keyword">final</span> <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">PooledLambda</span><span class="token punctuation">.</span><span class="token function">obtainMessage</span><span class="token punctuation">(</span> <span class="token comment">// cg: if APP process is not created,create it.</span>
                    <span class="token class-name">ActivityManagerInternal</span><span class="token operator">::</span><span class="token function">startProcess</span><span class="token punctuation">,</span> mService<span class="token punctuation">.</span>mAmInternal<span class="token punctuation">,</span> r<span class="token punctuation">.</span>processName<span class="token punctuation">,</span>
                    r<span class="token punctuation">.</span>info<span class="token punctuation">.</span>applicationInfo<span class="token punctuation">,</span> knownToBeDead<span class="token punctuation">,</span> <span class="token string">&quot;activity&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>intent<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mService<span class="token punctuation">.</span>mH<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
</code></pre>
<p>&#x6CE8;&#x610F;&#xFF1A;
AMS&#x4FA7;&#xFF1A;
&#x529F;&#x80FD;&#x5212;&#x5206;&#xFF1A; </p>
<blockquote>
<p>1&#x3001;ATMS&#x62FF;&#x5230;paused&#x6D88;&#x606F;&#xFF0C;&#x901A;&#x77E5; &#x6808;&#x7BA1;&#x7406;ActivityStackSupervisor&#x5224;&#x65AD; &#x6709;&#x6CA1;&#x8FDB;&#x7A0B;&#xFF1A;&#x76F8;&#x5F53;&#x4E8E;ATMS----&gt;  ActivityStackSupervisor</p>
<p>2&#x3001;&#x6808;&#x7BA1;&#x7406;&#x628A; &#x5224;&#x65AD;&#x7ED3;&#x679C;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED9;ATMS&#x548C; AMS&#xFF0C;AMS&#x8BA9; ProcessList&#x53BB;&#x5904;&#x7406; :   ActivityStackSupervisor ----&gt;   ATMS ----&gt; AMS ----&gt; ProcessList</p>
</blockquote>
<p>TODO:
&#x4ECE;&#x6570;&#x636E;&#x7ED3;&#x6784;/&#x4EE3;&#x7801;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#xFF0C;&#x5982;&#x4F55;&#x4FDD;&#x8BC1; &#x529F;&#x80FD;&#x4E0A;&#xFF0C;AMS&#x7EDF;&#x9886;&#x5168;&#x5C40;&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;</p>
<h3 id="ams-&#x901A;&#x77E5;-zygote&#x8FDB;&#x7A0B;"><a name="ams-&#x901A;&#x77E5;-zygote&#x8FDB;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#ams-&#x901A;&#x77E5;-zygote&#x8FDB;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6.1. AMS &#x901A;&#x77E5; Zygote&#x8FDB;&#x7A0B;</h3>
<p>&#x89E6;&#x53D1;&#x70B9;&#xFF1A; &#x5DF2;&#x7ECF;&#x5224;&#x65AD;&#x6CA1;&#x6709;&#x8FDB;&#x7A0B;</p>
<p><img src="startAPP.assets/image-20230127183513362.png" alt="image-20230127183513362"></p>
<p>&#x8BB0;&#x5FC6;&#xFF1A;</p>
<blockquote>
<p>&#x57FA;&#x4E8E;0&#x5C42;&#x6846;&#x67B6; &#xFF0C;<del>~AMS ----&gt; zygote&#x8FDB;&#x7A0B;&#x9636;&#x6BB5;</del>
&#x76EE;&#x7684;&#xFF1A;<del>&#x901A;&#x77E5;zygote fork&#x4E00;&#x4E2A;App&#x8FDB;&#x7A0B;&#xFF0C;</del>&#x5373;startProcess&#xFF0C;&#x81EA;&#x7136;
&#x9014;&#x5F84;&#xFF1A;&#x901A;&#x8FC7;socket &#x901A;&#x4FE1;&#xFF08;&#x6D41;&#xFF09;</p>
</blockquote>
<p>&#x81EA;&#x7136;:
&#x4E4B;&#x524D;&#x4F1A;  &#x5C01;&#x88C5;&#x4E00;&#x7CFB;&#x5217;&#x53C2;&#x6570; &#x4EE5;&#x6784;&#x5EFA;socket&#x6D88;&#x606F;&#xFF0C;  startViaZygote 
&#x4E3A;&#x4EC0;&#x4E48;ATMS,&#x6700;&#x7EC8;&#x8981;&#x8C03;&#x7528;&#x8981;&#x56DE;&#x5230;ams,  &#x6700;&#x7EC8;&#x8981;&#x5904;&#x7406;&#xFF0C;&#x4F46;atms&#x6CA1;&#x6709;processList</p>
<h2 id="zygoteserver-&#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;"><a name="zygoteserver-&#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;" class="anchor-navigation-ex-anchor" href="#zygoteserver-&#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7. ZygoteServer &#x63A5;&#x53D7;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x6D41;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;1&#xFF09;</h2>
<h3 id="&#x603B;&#x4E4B;&#xFF1A;"><a name="&#x603B;&#x4E4B;&#xFF1A;" class="anchor-navigation-ex-anchor" href="#&#x603B;&#x4E4B;&#xFF1A;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.1. &#x603B;&#x4E4B;&#xFF1A;</h3>
<p>ZygoteServer&#x662F;&#x4E00;&#x4E2A;socket&#x670D;&#x52A1;&#x5668;&#xFF0C;<del>&#x5728;runSelectLoop&#x8F6E;&#x8BE2;&#x6D88;&#x606F;(&#x6B7B;&#x5FAA;&#x73AF;)</del>&#xFF0C;<strong>&#x81EA;&#x7136;&#x662F;&#x5FC5;&#x7136;&#x7684;</strong>  &#xFF08;TODO:  &#x8F6E;&#x8BE2;&#x7684;epoll&#x673A;&#x5236;&#xFF09;</p>
<p>1&#x3001;&#x8F6E;&#x8BE2;&#x5230;&#x6D88;&#x606F;&#x540E;&#xFF0C;fork&#x51FA; APP process  (&#x81EA;&#x7136;&#xFF0C;fork&#x9700;&#x8981;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6765;&#x81EA;&#x4E8E;socket&#x7684;&#x5BF9;&#x7AEF;&#xFF0C;&#x89E3;&#x6790;&#x51FA;&#x6765;&#x7684;)</p>
<p>2&#x3001;&#x5728; APP process&#x4E2D;&#xFF0C;&#x5148;&#x5173;&#x95ED;Server Socket&#xFF0C; &#x81EA;&#x7136;&#xFF0C;&#x56E0;&#x4E3A;&#x7528;&#x4E0D;&#x5230;</p>
<p>&#x200B;          &#x521D;&#x59CB;&#x5316;  RuntimeInit</p>
<p>&#x200B;          &#x542F;&#x52A8;binder&#x9A71;&#x52A8;&#xFF08;&#x5229;&#x7528;AndroidRuntime&#xFF09;&#xFF1F; &#x542F;&#x52A8;&#x7EBF;&#x7A0B;&#x6C60;</p>
<p>&#x200B;           &#x53CD;&#x5C04;&#x8C03;&#x7528;ActivityThread&#x7684; main&#x51FD;&#x6570;&#xFF0C;&#x4ECE;&#x800C;&#x4E3B;&#x7EBF;&#x7A0B;&#x8D77;&#x6765;</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">RuntimeInit</span><span class="token punctuation">.</span><span class="token function">commonInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//cg: init Runtime. Two APPs have different runtime.</span>
<span class="token class-name">ZygoteInit</span><span class="token punctuation">.</span><span class="token function">nativeZygoteInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cg: init Binder/Binder ThreadPool</span>
<span class="token keyword">return</span> <span class="token class-name">RuntimeInit</span><span class="token punctuation">.</span><span class="token function">applicationInit</span><span class="token punctuation">(</span>targetSdkVersion<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// cg: invotes ActivtyThread&apos;s main method by reflecting</span>
</code></pre>
<p>&#x4EE3;&#x7801;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">//ZygoteConnection.java</span>
       <span class="token comment">//cg: nativeForkAndSpecialize a process for APP. Return 0 and 1</span>
        pid <span class="token operator">=</span> <span class="token class-name">Zygote</span><span class="token punctuation">.</span><span class="token function">forkAndSpecialize</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// cg: in child process. APP process</span>
                <span class="token comment">// in child</span>

                zygoteServer<span class="token punctuation">.</span><span class="token function">closeServerSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cg: Only zygote process needs socket server</span>
                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                <span class="token keyword">return</span> <span class="token function">handleChildProc</span><span class="token punctuation">(</span>parsedArgs<span class="token punctuation">,</span> descriptors<span class="token punctuation">,</span> childPipeFd<span class="token punctuation">,</span> <span class="token comment">//cg: &#x53CD;&#x5C04;&#x83B7;&#x53D6;</span>
                        parsedArgs<span class="token punctuation">.</span>mStartChildZygote<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token comment">// cg: zygote process</span>
                <span class="token comment">// In the parent. A pid &lt; 0 indicates a failure and will be handled in</span>
                <span class="token comment">// handleParentProc.</span>
                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre>
<p>&#x542F;&#x52A8;binder&#x9A71;&#x52A8;&#x3001; &#x542F;&#x52A8;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A; TODO</p>
<pre class="language-"><code class="lang-cpp"> <span class="token comment">// ProcessState.cpp</span>
<span class="token function">mDriverFD</span><span class="token punctuation">(</span><span class="token function">open_driver</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// app_main.cpp</span>
proc<span class="token operator">-&gt;</span><span class="token function">startThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>&#x5BF9;&#x4E8E;fork&#x51FA;&#x6765;&#x7684;APP&#x8FDB;&#x7A0B;&#xFF1A;</p>
<h3 id="&#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux-fork-&#x51FD;&#x6570;"><a name="&#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux-fork-&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux-fork-&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.2. &#x6B21;&#x8981;&#x8865;&#x5145;&#xFF1A;linux fork() &#x51FD;&#x6570;</h3>
<p>nativeForkAndSpecialize&#x5177;&#x4F53;&#x5982;&#x4F55;fork&#x7684;
-----&#x300B;zygote&#x89C6;&#x9891;</p>
<p><strong>&#x7ED3;&#x8BBA;</strong>&#xFF1A;
1&#x3001;&#x8FD4;&#x56DE;&#x6B21;&#x6570;&#xFF1A;&#x4E00;&#x822C;&#x8BF4;&#x6CD5;&#x4E3A;&#xFF1A;fork&#x51FD;&#x6570; &#x4E00;&#x5B9A;&#x4F1A;&#x8FD4;&#x56DE;&#x4E24;&#x6B21;&#x3002;
&#x4F46;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x6B21;&#xFF0C;<del>&#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x8FD4;&#x56DE;&#xFF0C;&#x8FD4;&#x56DE;&#x5728;&#x5B50;&#x8FDB;&#x7A0B;&#xFF1B;&#x7236;&#x8FDB;&#x7A0B;&#x7684;&#x8FD4;&#x56DE;&#xFF0C;&#x8FD4;&#x56DE;&#x5728;&#x7236;&#x8FDB;&#x7A0B;</del>&#xFF0C;<font color="red">&#x81EA;&#x7136;</font></p>
<p>&#x539F;&#x56E0;&#xFF1A;&#x5728;&#x8C03;&#x7528;fork&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B8C;&#x5168;&#x590D;&#x5236;&#x51FA;&#x53E6;&#x4E00;&#x4E2A;process&#xFF08;&#x5305;&#x62EC;&#x5176;&#x5C5E;&#x6027;&#x90FD;&#x4E00;&#x6837;&#xFF09;
           <strong>&#x81EA;&#x7136;&#xFF0C;</strong>&#x539F;&#x6765;&#x8FDB;&#x7A0B; &#x548C; fork&#x51FA;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x90FD;&#x8D70;&#x5728;&#x6267;&#x884C;fork&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x6709;&#x4E24;&#x5904;&#x8FD4;&#x56DE;&#x70B9;</p>
<p>-----&#x300B; TODO:  &#x6DF1;&#x5165;&#x7406;&#x89E3;linux fork&#x8FC7;&#x7A0B;</p>
<p><img src="startAPP.assets/image-20230125165954497.png" alt="image-20230125165954497"></p>
<p>----&#x300B;TODO:  &#x8FD4;&#x56DE;pid=0&#x5B50;&#x8FDB;&#x7A0B;&#x3002;&#x90A3;&#x4E48;,&#x4F55;&#x65F6;pid&#x53D8;&#x7684;&#x4E0D;&#x4E3A;0?</p>
<p>2&#x3001;&#x5173;&#x4E8E;&#x8FD4;&#x56DE;&#x503C;&#xFF1A;fork&#x8FD4;&#x56DE;&#x503C;0&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x5B69;&#x5B50;&#x8FDB;&#x7A0B;  &#xFF1B;&#x8FD4;&#x56DE;&#x503C; &gt; 0, &#x8BF4;&#x660E;&#x662F;Zygote&#x8FDB;&#x7A0B;&#x8FD4;&#x56DE;&#xFF1B;&#x8FD4;&#x56DE;&#x503C;-1&#xFF0C;fork&#x5931;&#x8D25;</p>
<p>3&#x3001;&#xFF0C;&#x5728;fork&#x8282;&#x70B9;&#x524D;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5728;fork&#x4E4B;&#x540E;&#xFF0C;&#x88AB;copy&#x5230;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x91CC;&#xFF0C;&#x72EC;&#x7ACB;&#x8FD0;&#x884C;&#xFF0C;&#x4E92;&#x4E0D;&#x5F71;&#x54CD;&#x3002;</p>
<p><a href="https://blog.csdn.net/m0_51242270/article/details/128086849?spm=1001.2101.3001.6650.3&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-3-128086849-blog-126355841.pc_relevant_3mothn_strategy_and_data_recovery&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-3-128086849-blog-126355841.pc_relevant_3mothn_strategy_and_data_recovery&amp;utm_relevant_index=6" target="_blank">https://blog.csdn.net/m0_51242270/article/details/128086849?spm=1001.2101.3001.6650.3&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-3-128086849-blog-126355841.pc_relevant_3mothn_strategy_and_data_recovery&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-3-128086849-blog-126355841.pc_relevant_3mothn_strategy_and_data_recovery&amp;utm_relevant_index=6</a></p>
<p><img src="startAPP.assets/a884677dd29b4df7ac3a90dd1f2ad6d9.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<pre class="language-"><code>int main() {
    std::cout &lt;&lt; &quot;main: &quot; &lt;&lt;   &quot;getpid: &quot; &lt;&lt; getpid() &lt;&lt; &quot;, thread_ID: &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;

    pid_t pid;
    int x=1;
    pid=fork();
    if(pid==0){  //child process
        std::cout &lt;&lt; &quot;child, &quot;  &lt;&lt; &quot;getpid: &quot; &lt;&lt; getpid() &lt;&lt; &quot;, thread_ID: &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; ++x: &quot; &lt;&lt; ++x &lt;&lt; std::endl;
        return 0;
    }
    //parent process
    std::cout &lt;&lt; &quot;parent, &quot;  &lt;&lt; &quot;getpid: &quot; &lt;&lt; getpid() &lt;&lt; &quot;, thread_ID: &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; --x: &quot; &lt;&lt; --x &lt;&lt; std::endl;

    return 0;
}



main: getpid: 788, thread_ID: 139836642585600
parent, getpid: 788, thread_ID: 139836642585600 --x: 0
child, getpid: 789, thread_ID: 139836642585600 ++x: 2
</code></pre><p>pid&#x4E3A;&#x8FDB;&#x7A0B;&#x53F7;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x65B0;fork&#x51FA;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E0E;zygote&#x8FDB;&#x7A0B;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#xFF08;&#x9664;&#x4E86;&#x4E00;&#x4E9B;&#xFF09;</p>
<h3 id="activitythread&#x7684;-main&#x51FD;&#x6570;&#x8D77;&#x6765;"><a name="activitythread&#x7684;-main&#x51FD;&#x6570;&#x8D77;&#x6765;" class="anchor-navigation-ex-anchor" href="#activitythread&#x7684;-main&#x51FD;&#x6570;&#x8D77;&#x6765;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.3. ActivityThread&#x7684; main&#x51FD;&#x6570;&#x8D77;&#x6765;</h3>
<p>&#xFF08;&#x951A;&#x70B9;&#xFF09;&#x57FA;&#x4E8E;0&#x5C42;&#x6A21;&#x578B;&#xFF0C;&#x4E3B;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#xFF1A;
1&#x3001;<del>&#x521B;&#x5EFA;&#x4E86;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684; &#x9A74;&#x62C9;&#x78E8;Looper&#xFF0C;&#x5E76;&#x8BA9;&#x6B7B;&#x5FAA;&#x73AF;&#x8DD1;&#x8D77;&#x6765;</del></p>
<p>2&#x3001;<del>&#x5411;AMS &#x6CE8;&#x518C; ActivityThread&#x7684;Binder &#x5373;IApplicationThread:  attachApplication</del></p>
<h2 id="app&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;"><a name="app&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;" class="anchor-navigation-ex-anchor" href="#app&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>2.8. APP&#x8FDB;&#x7A0B;&#x8D77;&#x6765;&#x540E;&#xFF0C;attach&#x8FC7;&#x7A0B;&#xFF08;&#x5173;&#x952E;&#x6D41;&#x7A0B;2&#xFF09;</h2>
<p>&#x4E00;&#x53E5;&#x8BDD;&#xFF1A;</p>
<blockquote>
<p>&#x4ECE;APP&#x89D2;&#x5EA6;,   APP&#x5411;AMS <font color="red">attach</font> ActivityThread&#x7684;Binder &#x5373;IApplicationThread</p>
<p>&#x4ECE;AMS&#x89D2;&#x5EA6;,  AMS&#x4FA7; bind Application</p>
</blockquote>
<p><img src="startAPP.assets/image-20230128002442276.png" alt="image-20230128002442276"></p>
<p>AMS.attachApplicationLocked()  &#x5177;&#x4F53;&#x505A;&#x4E86;&#x54EA;&#x4E9B;&#x4E8B;&#x60C5;&#x5462;&#xFF1F;
&#x57FA;&#x4E8E;&#x903B;&#x8F91;&#xFF0C;&#x63A8;&#x65AD;&#xFF1A;
1&#x3001;AMS&#x5C06;&#x65B0;&#x751F;&#x513F;&#x7684;&#x59D3;&#x540D;&#x3001;appInfo&#x7B49;&#x540C;&#x6B65;&#x7ED9;APP&#xFF08;&#x6B64;&#x65F6;&#x65B0;&#x751F;&#x513F;&#x767D;&#x7EB8;&#x4E00;&#x5F20;&#xFF0C;&#x548C;zygote&#x4E00;&#x6837;&#xFF09;&#x8C03;&#x7528;&#x4E86;APP.bindApplication &#xFF1A;</p>
<p>AMS&#x4FA7;&#xFF1A;thread.bindApplication(processName, appInfo, providers.........)   ----&gt;  &#x57FA;&#x4E8E;&#x521A;&#x642D;&#x5EFA;&#x7684;&#x6865;&#x6881;AMS--&gt;APP
APP&#x4FA7;&#xFF1A; &#x89C1;   &#x8865;&#x5145;APP&#x4FA7;handleBindApplication&#x7AE0;&#x8282;
2&#x3001;&#x5FC5;&#x7136;<del>&#x6CE8;&#x518C;ApplicationThread&#x7ED9;&#x4E86;AMS&#xFF0C;&#x5B58;&#x50A8;&#x5728;AMS&#x7684;PorcessRecord&#xFF0C;&#x6700;&#x7EC8;&#x5B58;&#x5728;mLruProcesses &#x4E2D;</del>----&#x300B;&#x81EA;&#x7136;&#xFF0C;&#x6865;&#x6881;ApplicationThread&#x7684;&#x6D41;&#x8F6C;&#x8FC7;&#x7A0B;
3&#x3001;<del>&#x5FC5;&#x7136;&#x6267;&#x884C;Activity&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF0C;</del>  &#x89C1;&#x4E0B;realStart ----&#x300B;&#x81EA;&#x7136;&#xFF0C;&#x6700;&#x7EC8;&#x76EE;&#x7684;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// AMS.Java</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">attachApplicationLocked</span><span class="token punctuation">(</span><span class="token class-name">IApplicationThread</span> thread<span class="token punctuation">,</span>
            <span class="token keyword">int</span> pid<span class="token punctuation">,</span> <span class="token keyword">int</span> callingUid<span class="token punctuation">,</span> <span class="token keyword">long</span> startSeq<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// Find the application record that is being attached...  either via</span>
        <span class="token comment">// the pid if we are running in multiple processes, or just pull the</span>
        <span class="token comment">// next app record if we are emulating process with anonymous threads.</span>
        <span class="token class-name">ProcessRecord</span> app<span class="token punctuation">;</span>
        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">SystemClock</span><span class="token punctuation">.</span><span class="token function">uptimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> bindApplicationTimeMillis<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pid <span class="token operator">!=</span> <span class="token constant">MY_PID</span> <span class="token operator">&amp;&amp;</span> pid <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>mPidsSelfLocked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                app <span class="token operator">=</span> mPidsSelfLocked<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cg: inited in handleProcessStartedLocked method.</span>
            <span class="token punctuation">}</span>
               &#x3002;&#x3002;&#x3002;&#x3002;&#x3002;&#x3002;&#x3002;
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> 
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">AppDeathRecipient</span> adr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AppDeathRecipient</span><span class="token punctuation">(</span>
                    app<span class="token punctuation">,</span> pid<span class="token punctuation">,</span> thread<span class="token punctuation">)</span><span class="token punctuation">;</span>
            thread<span class="token punctuation">.</span><span class="token function">asBinder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">linkToDeath</span><span class="token punctuation">(</span>adr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            app<span class="token punctuation">.</span>deathRecipient <span class="token operator">=</span> adr<span class="token punctuation">;</span> <span class="token comment">// cg: App Death Listner &#x6B7B;&#x4EA1;&#x76D1;&#x542C;.  http://t.zoukankan.com/xiayexingkong-p-6762569.html</span>
        <span class="token punctuation">}</span> 
        app<span class="token punctuation">.</span>curAdj <span class="token operator">=</span> app<span class="token punctuation">.</span>setAdj <span class="token operator">=</span> app<span class="token punctuation">.</span>verifiedAdj <span class="token operator">=</span> <span class="token class-name">ProcessList</span><span class="token punctuation">.</span><span class="token constant">INVALID_ADJ</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">setCurrentSchedulingGroup</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>setSchedGroup <span class="token operator">=</span> <span class="token class-name">ProcessList</span><span class="token punctuation">.</span><span class="token constant">SCHED_GROUP_DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>forcingToImportant <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token function">updateProcessForegroundLocked</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>hasShownUi <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">setDebugging</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>cached <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>killedByAm <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>killed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        thread<span class="token punctuation">.</span><span class="token function">bindApplication</span><span class="token punctuation">(</span>processName<span class="token punctuation">,</span> appInfo<span class="token punctuation">,</span> providers<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token comment">// cg: &#x5173;&#x952E;&#x6D41;&#x7A0B;&#xFF01;&#xFF01;&#xFF01;&#xFF01;&#x5C06;&#x5927;&#x91CF;APP&#x4FE1;&#x606F; &#x540C;&#x6B65;&#x7ED9;APP&#xFF08;&#x6B64;&#x65F6;APP&#x8FD8;&#x548C;zygote&#x8FDB;&#x7A0B;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x5462;&#xFF0C;&#xFF09;&#xFF0C;&#x6BD4;&#x5982;&#x8FDB;&#x7A0B;&#x540D;&#xFF0C;appInfo</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            app<span class="token punctuation">.</span><span class="token function">makeActive</span><span class="token punctuation">(</span>thread<span class="token punctuation">,</span> mProcessStats<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cg: IApplicationThread of APP is bound to ProcessRecord. &#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x540E;&#x9762;AMS&#x80FD;&#x8C03;&#x7528; APP&#x8FDB;&#x7A0B;&#x7684;&#x539F;&#x56E0;</span>
            mProcessList<span class="token punctuation">.</span><span class="token function">updateLruProcessLocked</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//cg: Finally processRecord is added to mLruProcesses &#x6700;&#x7EC8;&#x5B58;&#x5728;mLruProcesses&#x91CC;</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span> 
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="&#x8865;&#x5145;&#xFF1A;app&#x4FA7;-handlebindapplication"><a name="&#x8865;&#x5145;&#xFF1A;app&#x4FA7;-handlebindapplication" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;&#xFF1A;app&#x4FA7;-handlebindapplication"><i class="fa fa-link" aria-hidden="true"></i></a>2.8.1. &#x8865;&#x5145;&#xFF1A;APP&#x4FA7; handleBindApplication</h3>
<p>&#x53C2;&#x8003;&#xFF1A;<a href="https://blog.csdn.net/chupu2979/article/details/100616862" target="_blank">https://blog.csdn.net/chupu2979/article/details/100616862</a>
         <a href="https://blog.csdn.net/innost/article/details/47254381" target="_blank">https://blog.csdn.net/innost/article/details/47254381</a></p>
<p>&#x4E00;&#x53E5;&#x8BDD;&#x603B;&#x7ED3;handleBindApplication&#xFF1A;</p>
<p>handleBindApplication&#x4E3B;&#x8981;&#x5DE5;&#x4F5C;&#x662F;&#x521D;&#x59CB;&#x5316;APP&#xFF08;APP&#x7531;zygote&#x8FDB;&#x7A0B;fork&#x800C;&#x6765;&#xFF0C;&#x5728;hanldeBindApplication&#x4E4B;&#x524D;&#xFF0C;&#x8FD9;&#x4E2A;APP&#x8FDB;&#x7A0B;&#x548C;zygote&#x6CA1;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x3002;&#x53EA;&#x6709;&#x8C03;&#x7528;&#x5B8C;handleBindApplication&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;APP&#x8FDB;&#x7A0B;&#x624D;&#x662F;APP,  &#x6BD4;&#x5982;&#x8BE5;&#x8FDB;&#x7A0B;&#x6709;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x540D;&#x5B57;&#xFF0C;Aplication&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;&#x7B49;&#xFF09;&#x3002;</p>
<div class="accordion accordionClose"><div class="accordionButton"><div class="accordionTitle">&#x5177;&#x4F53;&#xFF1A;</div><div class="accordionSpinnerBox"><div class="accordionSpinner"></div></div></div><div class="accordionContent">
<pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handleBindApplication</span><span class="token punctuation">(</span><span class="token class-name">AppBindDatadata</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

   mBoundApplication <span class="token operator">=</span> data<span class="token punctuation">;</span>

   mConfiguration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

   mCompatConfiguration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x521D;&#x59CB;&#x5316;&#x6027;&#x80FD;&#x7EDF;&#x8BA1;&#x5BF9;&#x8C61;</span>

   mProfiler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Profiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   mProfiler<span class="token punctuation">.</span>profileFile <span class="token operator">=</span> data<span class="token punctuation">.</span>initProfileFile<span class="token punctuation">;</span>

   mProfiler<span class="token punctuation">.</span>profileFd <span class="token operator">=</span> data<span class="token punctuation">.</span>initProfileFd<span class="token punctuation">;</span>

   mProfiler<span class="token punctuation">.</span>autoStopProfiler <span class="token operator">=</span> data<span class="token punctuation">.</span>initAutoStopProfiler<span class="token punctuation">;</span>



    <span class="token comment">//&#x8BBE;&#x7F6E;&#x8FDB;&#x7A0B;&#x540D;&#x3002;&#x4ECE;&#x6B64;&#xFF0C;&#x4E4B;&#x524D;&#x90A3;&#x4E2A;&#x9ED8;&#x9ED8;&#x65E0;&#x540D;&#x7684;&#x8FDB;&#x7A0B;&#x7EC8;&#x4E8E;&#x6709;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x540D;&#x5B57;</span>

   <span class="token class-name">Process</span><span class="token punctuation">.</span><span class="token function">setArgV0</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>processName<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>ddm<span class="token punctuation">.</span></span>DdmHandleAppName</span><span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>processName<span class="token punctuation">)</span><span class="token punctuation">;</span>



    <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>persistent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

       <span class="token comment">//&#x5BF9;&#x4E8E;persistent&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5728;&#x4F4E;&#x5185;&#x5B58;&#x8BBE;&#x5907;&#x4E0A;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x5176;&#x4F7F;&#x7528;&#x786C;&#x4EF6;&#x52A0;&#x901F;&#x663E;&#x793A;</span>

       <span class="token class-name">Display</span> display <span class="token operator">=</span>

                 <span class="token class-name">WindowManagerImpl</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//&#x5F53;&#x5185;&#x5B58;&#x5927;&#x4E8E;512MB&#xFF0C;&#x6216;&#x8005;&#x5C4F;&#x5E55;&#x5C3A;&#x5BF8;&#x5927;&#x4E8E;1024*600&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x786C;&#x4EF6;&#x52A0;&#x901F;</span>

       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">isHighEndGfx</span><span class="token punctuation">(</span>display<span class="token punctuation">)</span><span class="token punctuation">)</span>

           <span class="token class-name">HardwareRenderer</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token punctuation">}</span>

    <span class="token comment">//&#x542F;&#x52A8;&#x6027;&#x80FD;&#x7EDF;&#x8BA1;</span>

     <span class="token keyword">if</span><span class="token punctuation">(</span>mProfiler<span class="token punctuation">.</span>profileFd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>   mProfiler<span class="token punctuation">.</span><span class="token function">startProfiling</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//&#x5982;&#x679C;&#x76EE;&#x6807;SDK&#x7248;&#x672C;&#x5C0F;&#x4E8E;12&#xFF0C;&#x5219;&#x8BBE;&#x7F6E;AsyncTask&#x4F7F;&#x7528;pool executor&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528;</span>

   <span class="token comment">//serializedexecutor&#x3002;&#x8FD9;&#x4E9B;executor&#x6D89;&#x53CA;Java Concurrent&#x7C7B;&#xFF0C;&#x5BF9;&#x6B64;&#x4E0D;&#x719F;&#x6089;&#x7684;&#x8BFB;&#x8005;</span>

   <span class="token comment">//&#x8BF7;&#x81EA;&#x884C;&#x5B66;&#x4E60;&#x548C;&#x7814;&#x7A76;&#x3002;</span>

   <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>appInfo<span class="token punctuation">.</span>targetSdkVersion <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">)</span>

           <span class="token class-name">AsyncTask</span><span class="token punctuation">.</span><span class="token function">setDefaultExecutor</span><span class="token punctuation">(</span><span class="token class-name">AsyncTask</span><span class="token punctuation">.</span><span class="token constant">THREAD_POOL_EXECUTOR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



    <span class="token comment">//&#x8BBE;&#x7F6E;timezone</span>

   <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">setDefault</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x8BBE;&#x7F6E;&#x8BED;&#x8A00;</span>

    <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">setDefault</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>config<span class="token punctuation">.</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment">//&#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x53CA;&#x517C;&#x5BB9;&#x6A21;&#x5F0F;</span>

    <span class="token function">applyConfigurationToResourcesLocked</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>config<span class="token punctuation">,</span> data<span class="token punctuation">.</span>compatInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">applyCompatConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



      <span class="token comment">//&#x6839;&#x636E;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;ApplicationInfo&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;LoadApk&#x5BF9;&#x8C61;</span>

     data<span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token function">getPackageInfoNoCheck</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>appInfo<span class="token punctuation">,</span> data<span class="token punctuation">.</span>compatInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment">//&#x5BF9;&#x4E8E;&#x7CFB;&#x7EDF;APK&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x4E3A;userdebug/eng&#x7248;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x8BB0;&#x5F55;log&#x4FE1;&#x606F;&#x5230;dropbox&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;</span>

     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>appInfo<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span>

            <span class="token punctuation">(</span><span class="token class-name">ApplicationInfo</span><span class="token punctuation">.</span><span class="token constant">FLAG_SYSTEM</span> <span class="token operator">|</span>

             <span class="token class-name">ApplicationInfo</span><span class="token punctuation">.</span><span class="token constant">FLAG_UPDATED_SYSTEM_APP</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

           <span class="token class-name">StrictMode</span><span class="token punctuation">.</span><span class="token function">conditionallyEnableDebugLogging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/*

    &#x5982;&#x76EE;&#x6807;SDK&#x7248;&#x672C;&#x5927;&#x4E8E;9&#xFF0C;&#x5219;&#x4E0D;&#x5141;&#x8BB8;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x64CD;&#x4F5C;&#xFF08;&#x5982;Socketconnect&#x7B49;&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x629B;&#x51FA;

    NetworkOnMainThreadException&#xFF0C;&#x8FD9;&#x4E48;&#x505A;&#x7684;&#x76EE;&#x7684;&#x662F;&#x9632;&#x6B62;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x56E0;&#x7F51;&#x7EDC;&#x64CD;&#x4F5C;&#x6267;&#x884C;

    &#x65F6;&#x95F4;&#x8FC7;&#x957F;&#x800C;&#x9020;&#x6210;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x4E0B;&#x964D;&#x3002;&#x8BF4;&#x5B9E;&#x8BDD;&#xFF0C;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x8FDB;&#x884C;&#x8FD9;&#x79CD;&#x9650;&#x5236;&#xFF0C;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x662F;&#x5426;&#x7F51;&#x7EDC;&#x64CD;&#x4F5C;

    &#x662F;&#x5E94;&#x7528;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x518D;&#x8BF4;&#xFF0C;Socket&#x4E5F;&#x53EF;&#x4F5C;&#x4E3A;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x624B;&#x6BB5;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7F51;&#x7EDC;&#x64CD;&#x4F5C;&#x8017;&#x65F6;&#x5F88;&#x77ED;&#x3002;

    &#x4F5C;&#x4E3A;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x8BBE;&#x7F6E;&#x8FD9;&#x79CD;&#x9650;&#x5236;&#x3002;&#x53E6;&#x5916;&#xFF0C;Goolge&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x5F00;&#x53D1;&#x6307;&#x5357;&#x6216;&#x89C4;&#x8303;&#x6765;&#x6307;&#x5BFC;&#x5F00;&#x53D1;&#x8005;&#xFF0C;

    &#x800C;&#x4E0D;&#x5E94;&#x5982;&#x6B64;&#x86EE;&#x6A2A;&#x5730;&#x5F3A;&#x52A0;&#x9650;&#x5236;&#x3002;

    */</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>appInfo<span class="token punctuation">.</span>targetSdkVersion<span class="token operator">&gt;</span> <span class="token number">9</span><span class="token punctuation">)</span>

        <span class="token class-name">StrictMode</span><span class="token punctuation">.</span><span class="token function">enableDeathOnNetwork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



    <span class="token comment">//&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x5C4F;&#x5E55;&#x5BC6;&#x5EA6;&#xFF0C;&#x5219;&#x4E3A;Bitmap&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684;&#x5C4F;&#x5E55;&#x5BC6;&#x5EA6;</span>

   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>appInfo<span class="token punctuation">.</span>flags

               <span class="token operator">&amp;</span><span class="token class-name">ApplicationInfo</span><span class="token punctuation">.</span><span class="token constant">FLAG_SUPPORTS_SCREEN_DENSITIES</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">setDefaultDensity</span><span class="token punctuation">(</span><span class="token class-name">DisplayMetrics</span><span class="token punctuation">.</span><span class="token constant">DENSITY_DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>debugMode <span class="token operator">!=</span> <span class="token class-name">IApplicationThread</span><span class="token punctuation">.</span><span class="token constant">DEBUG_OFF</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">//&#x8C03;&#x8BD5;&#x6A21;&#x5F0F;&#x76F8;&#x5173;&#x5904;&#x7406;</span>

   <span class="token punctuation">}</span>

   <span class="token class-name">IBinder</span> b<span class="token operator">=</span> <span class="token class-name">ServiceManager</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">CONNECTIVITY_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">IConnectivityManager</span> service <span class="token operator">=</span>

                        <span class="token class-name">IConnectivityManager<span class="token punctuation">.</span>Stub</span><span class="token punctuation">.</span><span class="token function">asInterface</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>

       <span class="token comment">//&#x8BBE;&#x7F6E;Http&#x4EE3;&#x7406;&#x4FE1;&#x606F;</span>

       <span class="token class-name">ProxyPropertiesproxyProperties</span> <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">setHttpProxySystemProperty</span><span class="token punctuation">(</span>proxyProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">RemoteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>



   <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>instrumentationName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//&#x5728;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6B64;&#x6761;&#x4EF6;&#x4E0D;&#x6EE1;&#x8DB3;</span>

   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

      <span class="token comment">//&#x521B;&#x5EFA;Instrumentation&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x90FD;&#x518D;&#x8FD9;&#x4E2A;&#x6761;&#x4EF6;&#x4E0B;&#x6267;&#x884C;</span>

     mInstrumentation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Instrumentation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token punctuation">}</span>

   <span class="token comment">//&#x5982;&#x679C;Package&#x4E2D;&#x58F0;&#x660E;&#x4E86;FLAG_LARGE_HEAP&#xFF0C;&#x5219;&#x53EF;&#x8DF3;&#x8FC7;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF0C;&#x653E;&#x5FC3;&#x4F7F;&#x7528;&#x5185;&#x5B58;</span>

   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>appInfo<span class="token punctuation">.</span>flags<span class="token operator">&amp;</span><span class="token class-name">ApplicationInfo</span><span class="token punctuation">.</span><span class="token constant">FLAG_LARGE_HEAP</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token class-name"><span class="token namespace">dalvik<span class="token punctuation">.</span>system<span class="token punctuation">.</span></span>VMRuntime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearGrowthLimit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



   <span class="token comment">//&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Application&#xFF0C;data.info&#x4E3A;LoadedApk&#x7C7B;&#x578B;&#xFF0C;&#x5728;&#x5176;&#x5185;&#x90E8;&#x4F1A;&#x901A;&#x8FC7;Java&#x53CD;&#x5C04;&#x673A;&#x5236;</span>

   <span class="token comment">//&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5728;&#x8BE5;APK AndroidManifest.xml&#x4E2D;&#x58F0;&#x660E;&#x7684;Application&#x5BF9;&#x8C61;</span>

   <span class="token class-name">Applicationapp</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>info<span class="token punctuation">.</span><span class="token function">makeApplication</span><span class="token punctuation">(</span>

                                     data<span class="token punctuation">.</span>restrictedBackupMode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">//mInitialApplication&#x4FDD;&#x5B58;&#x8BE5;&#x8FDB;&#x7A0B;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x521B;&#x5EFA;&#x7684;Application</span>

  mInitialApplication <span class="token operator">=</span> app<span class="token punctuation">;</span>



   <span class="token comment">//&#x5B89;&#x88C5;&#x672C;Package&#x4E2D;&#x643A;&#x5E26;&#x7684;ContentProvider</span>

   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>restrictedBackupMode<span class="token punctuation">)</span><span class="token punctuation">{</span>

      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ProviderInfo</span><span class="token punctuation">&gt;</span></span> providers <span class="token operator">=</span> data<span class="token punctuation">.</span>providers<span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>providers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

               <span class="token comment">//installContentProviders&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5206;&#x6790;&#x8FC7;&#x4E86;</span>

               <span class="token function">installContentProviders</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> providers<span class="token punctuation">)</span><span class="token punctuation">;</span>

               mH<span class="token punctuation">.</span><span class="token function">sendEmptyMessageDelayed</span><span class="token punctuation">(</span><span class="token class-name">H</span><span class="token punctuation">.</span><span class="token constant">ENABLE_JIT</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

           <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

   <span class="token comment">//&#x8C03;&#x7528;Application&#x7684;onCreate&#x51FD;&#x6570;&#xFF0C;&#x505A;&#x4E00;&#x4E9B;&#x521D;&#x59CB;&#x5DE5;&#x4F5C;</span>

  mInstrumentation<span class="token punctuation">.</span><span class="token function">callApplicationOnCreate</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre>
</div></div>
<p>&#x5176;&#x4E2D;&#x6700;&#x91CD;&#x8981;&#x7684;&#x6709;&#xFF1A;</p>
<p>&#xB7; <font color="red">&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Application&#x5BF9;&#x8C61;</font>&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;&#x662F;&#x672C;&#x8FDB;&#x7A0B;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;Application&#x3002;</p>
<p>&#xB7; &#x5982;&#x679C;&#x8BE5;Application&#x6709;ContentProvider&#xFF0C;&#x5219;&#x5E94;&#x5B89;&#x88C5;&#x5B83;&#x4EEC;&#x3002;</p>
<h2 id="activityb--&#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;--realstart"><a name="activityb--&#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;--realstart" class="anchor-navigation-ex-anchor" href="#activityb--&#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;--realstart"><i class="fa fa-link" aria-hidden="true"></i></a>2.9. ActivityB  &#x771F;&#x6B63;&#x542F;&#x52A8;&#x6D41;&#x7A0B;  realStart</h2>
<p>&#x9014;&#x5F84;&#xFF1A;&#x57FA;&#x4E8E;&#x521A;&#x642D;&#x5EFA;&#x7684;&#x6865;&#x6881;AMS--&gt;APP</p>
<p><img src="startAPP.assets/image-20230213131703619.png" alt="image-20230213131703619"></p>
<p>&#x89E6;&#x53D1;&#x70B9;&#xFF08;&#x6211;&#x6765;&#x81EA;&#x54EA;&#x91CC;&#xFF09;&#xFF1A;</p>
<blockquote>
<p>&#x89C1;&#x603B;&#x8109;&#x7EDC;&#xFF1A; ActivityManagerService.attachApplication</p>
</blockquote>
<p>&#x6838;&#x5FC3;&#x7C7B;&#xFF08;&#x6211;&#x662F;&#x8C01;&#xFF09;&#xFF1A;</p>
<blockquote>
<p>&#x6808;&#x7BA1;&#x7406; &#x662F; &#x63A7;&#x5236;&#x7740;&#x542F;&#x52A8;&#xFF0C;&#x81EA;&#x7136;&#x662F; ActivityStackSupervisor</p>
</blockquote>
<p>&#x5177;&#x4F53;&#xFF08;&#x505A;&#x4EC0;&#x4E48;&#xFF09;</p>
<blockquote>
<p>ActivityStackSupervisor &#x521B;&#x5EFA;&#x751F;&#x547D;&#x5468;&#x671F;&#x5C01;&#x88C5;&#x7C7B;Transaction&#xFF0C;&#x4EA4;&#x7ED9; &#x751F;&#x547D;&#x5468;&#x671F;&#x7BA1;&#x7406;&#x7C7B;&#xFF0C;&#x53BB;&#x540C;&#x6B65;&#x7ED9;APP</p>
</blockquote>
<h3 id="&#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;app&#x4FA7;"><a name="&#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;app&#x4FA7;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;app&#x4FA7;"><i class="fa fa-link" aria-hidden="true"></i></a>2.9.1. &#x8865;&#x5145;&#xFF1A;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;&#x5230;APP&#x4FA7;</h3>
<p><img src="startAPP.assets/image-20230213005936967.png" alt="image-20230213005936967"></p>
<p>&#x4E0D;&#x5F97;&#x4E0D;&#xFF1A;
1&#x3001;&#x751F;&#x547D;&#x5468;&#x671F;&#x7531;AMS&#x63A7;&#x5236;&#xFF0C;&#x901A;&#x8FC7;&#x4E8B;&#x4EF6;ClientTranction &#x540C;&#x6B65;&#x5230;APP</p>
<p>2&#x3001;&#x81EA;&#x7136;&#x901A;&#x8FC7;ActivityTread &#x8DE8;&#x8FDB;&#x7A0B; &#x540C;&#x6B65;</p>
<p>3&#x3001;<del><strong>binder&#x7EBF;&#x7A0B;&#x8FC7;&#x6765;</strong>&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x4F1A;&#x5B58;&#x5728;handler &#x8F6C;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#x6267;&#x884C;</del>   -----&#x300B; &#x81EA;&#x7136;&#xFF0C;&#x56FE;&#x4E2D; Handler &#x820D;&#x5F03;</p>
<p>&#x81EA;&#x7136;&#xFF1A;</p>
<p>1&#x3001;&#x7B2C;&#x4E00;&#x6B21;&#xFF0C;&#x81EA;&#x7136;&#x76F4;&#x63A5;&#x540C;&#x6B65;&#x4E86;resume&#x8FC7;&#x6765;&#x3002;&#xFF08;&#x81EA;&#x7136;APP&#x7AEF;&#xFF0C;&#x5148;&#x8981;create&#x3001;start&#xFF09;  &#x89C1;&#xFF1A; </p>
<p><img src="startAPP.assets/image-20230213010352118.png" alt="image-20230213010352118"></p>
<h3 id="&#x8865;&#x5145;&#xFF1A;app-&#x4FA7;&#x6267;&#x884C;-&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction--&#x7684;&#x6267;&#x884C;execute&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;"><a name="&#x8865;&#x5145;&#xFF1A;app-&#x4FA7;&#x6267;&#x884C;-&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction--&#x7684;&#x6267;&#x884C;execute&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;&#xFF1A;app-&#x4FA7;&#x6267;&#x884C;-&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction--&#x7684;&#x6267;&#x884C;execute&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;"><i class="fa fa-link" aria-hidden="true"></i></a>2.9.2. &#x8865;&#x5145;&#xFF1A;APP &#x4FA7;&#x6267;&#x884C; &#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;transaction  &#x7684;&#x6267;&#x884C;execute(&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;)</h3>
<p>&#x6838;&#x5FC3;&#x51FD;&#x6570;&#xFF1A; </p>
<blockquote>
<p>TransactionExecutor.execute(transaction);    <font color="red">TransactionExecutor &#x6267;&#x884C;&#x5668;</font></p>
</blockquote>
<p><img src="startAPP.assets/image-20230213155539264.png" alt="image-20230213155539264"></p>
<p>&#x89E6;&#x53D1;&#x6D41;&#x7A0B;&#xFF1A;
&#x81EA;&#x7136;&#x662F;&#xFF0C;realStart&#x6D41;&#x7A0B; &#x89E6;&#x53D1;&#x4E86; ams&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x540C;&#x6B65;</p>
<p>ActivityThread &#x76F8;&#x5173;&#x51FD;&#x6570;&#xFF1A; </p>
<blockquote>
<p>handleLaunchActivity   ---&gt;  performLaunchActivity   ---&gt; &#x3010;1&#x3011;<font color="red">  &#x521B;&#x5EFA;Activity&#xFF0C;&#x5E76; attach() &#x521B;&#x5EFA;window</font>-----&gt; onCreate &#xFF08;<code>&#x8FD9;&#x91CC;&#x586B;&#x5145;&#x5177;&#x4F53;view</code>&#xFF09; &#x3010;2&#x3011;</p>
<p>handleStartActivity   ---&gt;  performStartActivity    -----&gt;  onStart</p>
<p>handleResumeActivity   ---&gt;  performResumeActivity    -----&gt;  onResume</p>
</blockquote>
<p>&#x4E0D;&#x5F97;&#x4E0D;&#xFF1A;</p>
<p>1&#x3001;&#x3010;1&#x3011; ActivityThread.performLaunchActivity &#x76EE;&#x6807;&#x662F; &#x521B;&#x5EFA;activity&#x3001;window&#x3001;view&#x6811;  ----&gt;  &#x81EA;&#x7136;&#xFF0C;&#x3010;1&#x3011;&#x4E0D;&#x5F97;&#x4E0D;</p>
<p>2&#x3001;&#x5728; Activity.attach() &#x4E2D;&#x65B0;&#x5EFA;window&#xFF08;&#x81EA;&#x7136;&#xFF0C;&#x5E76;&#x7ED1;&#x5B9A;windowManagerImpl&#xFF09;</p>
<p>3&#x3001;onCreate&#x4E2D;&#xFF0C;APP&#x5F00;&#x53D1;&#x8005;setContentView() &#x8FC7;&#x7A0B;&#xFF1A;&#x4E3A;  &#x5F00;&#x53D1;&#x8005;view &#x6DFB;&#x52A0; &#x6700;&#x9876;&#x7EA7;view------DecorView&#xFF0C;&#x771F;&#x6B63;&#x7684;viewTree</p>
<p>TODO:  &#x52A0;&#x5F3A;&#x6A21;&#x578B;&#xFF1A;  </p>
<p>&#x5C0F;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;</p>
<blockquote>
<p>onCreate&#x548C;onResume&#x662F;AMS &#x540C;&#x6B65;&#x6765;&#x7684;</p>
<p>onStart&#x662F; APP&#x4FA7;&#x6267;&#x884C;&#x5668; &#x81EA;&#x5DF1;&#x7B97;&#x7684;&#xFF08;&#x4E2D;&#x95F4;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x72B6;&#x6001;&#x90FD;&#x8981;&#x6267;&#x884C;cylceToPath&#xFF09;</p>
</blockquote>
<p>TODO:</p>
<pre class="language-"><code>final void attach(Context context, ActivityThread aThread,
        Instrumentation instr, IBinder token, int ident,
        Application application, Intent intent, ActivityInfo info,
        CharSequence title, Activity parent, String id,
        NonConfigurationInstances lastNonConfigurationInstances,
        Configuration config, String referrer, IVoiceInteractor voiceInteractor,
        Window window, ActivityConfigCallback activityConfigCallback, IBinder assistToken) {
    attachBaseContext(context);

    mFragments.attachHost(null /*parent*/);

    mWindow = new PhoneWindow(this, window, activityConfigCallback);//cg: new window
    mWindow.setWindowControllerCallback(this);
    mWindow.setCallback(this);//cg: Activity&#x4E4B;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E8B;&#x4EF6;&#x7B49;&#x6D88;&#x606F;&#x7684;&#x6765;&#x6E90;&#xFF1A;Callback: dispatchKeyEvent&#x3001;onWindowFocusChanged&#x3001;onWindowAttributesChanged
</code></pre><p>&#x5173;&#x4E8E;handleResumeActivity&#x6D41;&#x7A0B;----&#x300B; TODO: &#x65B0;&#x8D77;&#x7AE0;&#x8282;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">//ActivityThread.java</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleResumeActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">ActivityClientRecord</span> r <span class="token operator">=</span> <span class="token function">performResumeActivity</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> finalStateRequest<span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//cg: onResume</span>
    wm<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>decor<span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//cg: keyProcess.&#x663E;&#x793A;&#xFF1A; &#x8C03;&#x7528; WindowManagerImpl &#x5C06;decorview &#x6DFB;&#x52A0;&#x5230;window&#x7CFB;&#x7EDF;&#x4E2D;</span>
    <span class="token class-name">Looper</span><span class="token punctuation">.</span><span class="token function">myQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addIdleHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Idler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//cg: key process. Idler&#x4E8B;&#x4EF6;&#xFF0C;&#x5173;&#x95ED;ActivityA &#x3010;Idler&#x4E8B;&#x4EF6;&#x3011;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x5148;&#x8C03;&#x7528;&#x7684; onResume&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x663E;&#x793A;&#x7684;</p>
<p>-------&#x300B;  &#x4F46;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#xFF1A;<font color="red">&#x90FD;&#x662F;&#x5728;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x5904;&#x7406;&#x6D41;&#x7A0B;&#x91CC;&#xFF0C;&#x4E2D;&#x95F4;&#x4E0D;&#x53EF;&#x80FD;&#x65AD;&#xFF0C;&#x90FD;&#x4F1A;&#x4E00;&#x8D77;&#x6267;&#x884C;&#x5B8C;</font></p>
<h2 id="&#x542F;&#x52A8;activitya&#x7684;activity-stop&#x9636;&#x6BB5;"><a name="&#x542F;&#x52A8;activitya&#x7684;activity-stop&#x9636;&#x6BB5;" class="anchor-navigation-ex-anchor" href="#&#x542F;&#x52A8;activitya&#x7684;activity-stop&#x9636;&#x6BB5;"><i class="fa fa-link" aria-hidden="true"></i></a>2.10. &#x542F;&#x52A8;ActivityA&#x7684;Activity stop&#x9636;&#x6BB5;</h2>
<p>&#x6700;&#x540E;&#x4E00;&#x6B65;&#xFF0C;&#x8001;&#x7687;&#x5E1D;&#x884C;&#x5C06;&#x5C31;&#x6728;stop</p>
<p><img src="startAPP.assets/image-20230213165559180.png" alt="image-20230213165559180"></p>
<p>&#x89E6;&#x53D1;&#x70B9;&#xFF1A;&#x65B0;&#x7687;&#x5E1D;&#x5B8C;&#x6210;&#x4E86;&#x767B;&#x57FA;&#x7684;&#x6240;&#x6709;&#x4E8B;&#x60C5;&#xFF0C;&#x5C31;&#x901A;&#x77E5;&#x603B;&#x7BA1;&#xFF0C;&#x8BA9;&#x8001;&#x7687;&#x5E1D;&#x4E0D;&#x8981;&#x518D;&#x54D4;&#x54D4;&#x4E86;Stop&#xFF1A;</p>
<blockquote>
<p>ActivityB &#x5B8C;&#x6210;&#x4E86;&#x6240;&#x6709;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684; &#x540C;&#x6B65;&#xFF08;onCreate&#x3001;onStart&#x3001;onResume&#xFF09;&#x3002;</p>
<p>&#x5728;handleResumeActivity &#x6700;&#x540E;&#x4E00;&#x523B;&#xFF0C;&#x901A;&#x77E5;ATMS&#xFF0C;&#x5173;&#x95ED;ActivityA &#xFF08;<del>&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x540C;&#x6B65;</del>~&#xFF09;&#x3002;&#x89C1;&#x3010;Idler&#x4E8B;&#x4EF6;&#x3011;</p>
</blockquote>
<p>TODO:</p>
<p>Idler&#x4E8B;&#x4EF6; &#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x6267;&#x884C;&#x5462;&#xFF1F;&#x5F53; Looper&#x91CC;&#x6CA1;&#x6709;&#x53EF;&#x6267;&#x884C;&#x7684;&#x6D88;&#x606F;&#x4E86; ------&#x300B;  &#x8FD9;&#x5C31;&#x89E3;&#x91CA;&#x4E86;&#xFF0C;&#x505C;&#x6B62;ActivityA &#x662F;&#x6709;&#x7A7A;&#x95F2;&#x65F6;&#xFF0C;&#x624D;&#x505A;&#x7684;</p>
<h2 id="&#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;"><a name="&#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;" class="anchor-navigation-ex-anchor" href="#&#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;"><i class="fa fa-link" aria-hidden="true"></i></a>2.11. &#x8865;&#x5145;&#xFF1A;render&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;</h2>
<p>&#x65F6;&#x673A;&#xFF1A;handleLaunchActivity</p>
<pre class="language-"><code class="lang-java">
 <span class="token comment">// ActivityThread.java</span>
 <span class="token keyword">public</span> <span class="token class-name">Activity</span> <span class="token function">handleLaunchActivity</span><span class="token punctuation">(</span><span class="token class-name">ActivityClientRecord</span> r<span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ThreadedRenderer</span><span class="token punctuation">.</span>sRendererDisabled
                <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>activityInfo<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> <span class="token class-name">ActivityInfo</span><span class="token punctuation">.</span><span class="token constant">FLAG_HARDWARE_ACCELERATED</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &#x786C;&#x4EF6;&#x52A0;&#x901F;</span>
            <span class="token class-name">HardwareRenderer</span><span class="token punctuation">.</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &#x3010;1&#x3011;&#x542F;&#x52A8;render&#x7EBF;&#x7A0B;  Start render thread and initialize EGL or Vulkan.</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">WindowManagerGlobal</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="todo"><a name="todo" class="anchor-navigation-ex-anchor" href="#todo"><i class="fa fa-link" aria-hidden="true"></i></a>2.12. TODO:</h2>
<p>ApplicationThread&#x662F;binder&#x7EBF;&#x7A0B;&#x6C60;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;</p>
<p>AMS&#x4E5F;&#x662F;&#x561B;&#xFF1F;</p>
<h2 id="&#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;"><a name="&#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;" class="anchor-navigation-ex-anchor" href="#&#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;"><i class="fa fa-link" aria-hidden="true"></i></a>2.13. &#x9762;&#x8BD5;&#x95EE;&#x9898;&#xFF1A;</h2>
<p><img src="startAPP.assets/image-20221129005306480.png" alt="image-20221129005306480"></p>
<p>1&#x3001;setContentView</p>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;app&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;"><a name="&#x4E3A;&#x4EC0;&#x4E48;app&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;" class="anchor-navigation-ex-anchor" href="#&#x4E3A;&#x4EC0;&#x4E48;app&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;"><i class="fa fa-link" aria-hidden="true"></i></a>2.13.1. &#x4E3A;&#x4EC0;&#x4E48;APP&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#xFF1F;</h3>
<p>1&#x3001;<strong>&#x5B89;&#x5168;&#x6027;&#x89D2;&#x5EA6;</strong>&#xFF1A;<del>&#x5982;&#x679C;&#x90A3;&#x6837;&#x5C31;&#x89C1;&#x9B3C;&#x4E86;&#xFF0C;APP&#x81EA;&#x5DF1;&#x662F;&#x5E94;&#x7528;&#x8FDB;&#x7A0B;&#xFF0C;&#x5F00;&#x8F9F;&#x8FDB;&#x7A0B;&#x662F;&#x975E;&#x5E38;&#x5371;&#x9669;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5FC5;&#x987B;&#x7531;&#x4E13;&#x4EBA;&#x505A;&#x4E13;&#x95E8;&#x7684;&#x4E8B;&#x3002;</del></p>
<p>2&#x3001;<strong>&#x6027;&#x80FD;&#x89D2;&#x5EA6;&#xFF08;&#x65F6;&#x95F4;&#x4E0A;&#x3001;&#x7A7A;&#x95F4;&#x4E0A;&#xFF09;</strong>&#xFF1A;&#x90FD;&#x7531;Zygote&#x8FDB;fork&#xFF0C;&#x53EF;&#x4EE5; &#x5171;&#x4EAB;&#xFF08;write&#x65F6;&#x590D;&#x5236;&#xFF09;&#xFF0C;&#x6BD4;APP&#x81EA;&#x5DF1;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#xFF0C;&#x8981;&#x5FEB;&#x7684;&#x591A;&#x3001;&#x5185;&#x5B58;&#x5F00;&#x9500;&#x5C0F;&#xFF08;&#x5982;&#x679C;&#x662F;&#x5171;&#x4EAB;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x6CA1;&#x5F00;&#x9500;&#xFF09;</p>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;"><a name="&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;" class="anchor-navigation-ex-anchor" href="#&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>2.13.2. &#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;&#xFF08;&#x7F51;&#x6613;&#x4E8C;&#x9762;&#xFF09;</h3>
<p>android&#x4E2D;AMS&#x901A;&#x77E5;Zygote&#x53BB;fork&#x8FDB;&#x7A0B;&#x6D41;&#x7A0B;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;socket&#x800C;&#x4E0D;&#x4F7F;&#x7528;binder&#xFF1F;</p>
<p>&#x53C2;&#x8003;&#xFF1A;</p>
<p><a href="https://blog.csdn.net/cpcpcp123/article/details/127990882" target="_blank">https://blog.csdn.net/cpcpcp123/article/details/127990882</a>    </p>
<p><a href="https://blog.csdn.net/rzleilei/article/details/125770598" target="_blank">https://blog.csdn.net/rzleilei/article/details/125770598</a></p>
<p>&#x539F;&#x56E0;&#x4E00;&#xFF1A;</p>
<p><strong>1. &#x5148;&#x540E;&#x65F6;&#x5E8F;&#x95EE;&#x9898;&#xFF1A;</strong></p>
<p>&#x57FA;&#x4E8E; &#x542F;&#x52A8;&#x7CFB;&#x7EDF;&#x7684;0&#x5C42;&#x56FE;&#xFF0C; &#x5982;&#x679C;&#x7528;Zygote&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;binder&#x88AB;&#x901A;&#x4FE1;</p>
<p>------&gt;  &#x81EA;&#x7136;&#xFF0C;&#x5728; Zygote&#x8FDB;&#x7A0B; &#x5728;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x670D;&#x52A1;&#x7ED9;ServiceManager&#xFF08;&#x4F46;&#x6B64;&#x65F6;&#x6709;&#x53EF;&#x80FD;ServiceManager&#x6CA1;&#x6709;&#x521D;&#x59CB;&#x5316;&#x597D;&#xFF09;</p>
<p><img src="startAPP.assets/image-20230411234924550.png" alt="image-20230411234924550"></p>
<p><strong>&#x7B80;&#x8A00;&#x4E4B;</strong>&#xFF1A;</p>
<p>&#x95EE;&#x9898;&#x5728;&#x4E8E; <strong>&#x4E0D;&#x80FD;</strong>&#x4FDD;&#x8BC1;ServiceManger&#x5148;&#x521D;&#x59CB;&#x5316;&#x597D;&#xFF08;&#x56E0;&#x4E3A;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x662F;&#x5E76;&#x884C;&#x7684;&#xFF09;</p>
<p>&#x8865;&#x5145;&#xFF1A;</p>
<blockquote>
<p>&#x56FE;&#x4E2D;1&#x3001;2&#x3001;3&#x3001;4&#x53EA;&#x662F;&#x5F00;&#x59CB;&#x521B;&#x5EFA;&#x7684;&#x65F6;&#x5E8F;&#x3002;&#x4E0D;&#x662F;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x65F6;&#x5E8F;&#xFF01;&#xFF01;&#xFF01;&#xFF01;</p>
</blockquote>
<p><del>&#x62D3;&#x5C55;&#x95EE;&#x9898;&#xFF1A;</del></p>
<blockquote>
<p>&#x7B49;ServiceManager&#x5B8C;&#x5168;&#x521D;&#x59CB;&#x5316;&#x597D;&#x518D;&#x53BB;&#x6CE8;&#x518C;&#x4E0D;&#x5C31;&#x597D;&#x4E86;&#x5417;&#xFF1F; ----&#x300B;  &#x8FD9;&#x4E2A;&#x7B49;&#xFF0C;&#x4E24;&#x79CD;&#x5904;&#x7406;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;&#x3001;&#x5B8C;&#x5168;&#x521D;&#x59CB;&#x5316;&#x597D;&#xFF0C;&#x901A;&#x77E5; -----&gt; &#x8FD9;&#x4E2A;&#x901A;&#x77E5;&#x4E5F;&#x57AE;&#x4E86;&#x8FDB;&#x7A0B;&#xFF0C;&#x8BBE;&#x8BA1;&#x5197;&#x4F59;</p>
<p>&#xFF08;2&#xFF09;&#x3001;&#x5EF6;&#x65F6;10ms ----&gt; &#x5783;&#x573E;&#x505A;&#x6CD5;</p>
</blockquote>
<p><strong>2&#x3001;Linux&#x591A;&#x7EBF;&#x7A0B;&#x7684;fork&#x5B58;&#x5728;&#x95EE;&#x9898;</strong></p>
<p>&#x80CC;&#x666F;&#xFF1A;</p>
<blockquote>
<p> Linux&#x4E2D;&#xFF0C;fork&#x8FDB;&#x7A0B;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x662F;&#x5B8C;&#x7F8E;&#x7684;fork&#xFF0C;linux&#x8BBE;&#x8BA1;&#x4E4B;&#x521D;&#x53EA;&#x8003;&#x8651;&#x5230;&#x4E86;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;fork&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5982;&#x679C;&#x4E3B;&#x8FDB;&#x7A0B;&#x4E2D;&#x5B58;&#x5728;&#x5B50;&#x7EBF;&#x7A0B;&#xFF0C;&#x90A3;&#x4E48;fork&#x8FDB;&#x7A0B;&#x4E2D;&#xFF0C;&#x5176;&#x5B50;&#x7EBF;&#x7A0B;&#x7684;&#x9501;&#x72B6;&#x6001;&#xFF0C;&#x6302;&#x8D77;&#x72B6;&#x6001;&#x7B49;&#x7B49;&#x90FD;&#x662F;&#x4E0D;&#x53EF;&#x6062;&#x590D;&#x7684;&#xFF0C;<font color="red">&#x53EA;&#x6709;&#x4E3B;&#x8FDB;&#x7A0B;&#x7684;&#x624D;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x3002;</font></p>
<p>TODO:  &#x6240;&#x4EE5;Zygote&#x8FDB;&#x7A0B;&#xFF0C;&#x53EA;&#x6709;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF1F;&#xFF1F;&#xFF1F;&#xFF1F;</p>
</blockquote>
<p><strong>binder&#x7EBF;&#x7A0B;&#x72B6;&#x6001;</strong> &#x5728;fork&#x8FC7;&#x7A0B;&#x4E2D;<strong>&#x5B58;&#x5728;&#x95EE;&#x9898;&#xFF1A;</strong></p>
<blockquote>
<p>binder&#x4F5C;&#x4E3A;&#x5178;&#x578B;&#x7684;CS&#x6A21;&#x5F0F;&#xFF0C;&#x5176;&#x5728;<strong>Server&#x662F;&#x901A;&#x8FC7;&#x7EBF;&#x7A0B;</strong>&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;Server&#x7B49;&#x5F85;&#x8BF7;&#x6C42;&#x72B6;&#x6001;&#x65F6;&#xFF0C;&#x5FC5;&#x7136;&#x662F;&#x5904;&#x4E8E;&#x4E00;&#x79CD;&#x6302;&#x8D77;&#x7684;&#x72B6;&#x6001;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F7F;&#x7528;<a href="https://so.csdn.net/so/search?q=binder&#x673A;&#x5236;&amp;spm=1001.2101.3001.7020" target="_blank">binder&#x673A;&#x5236;</a>&#xFF0C;zygote&#x8FDB;&#x7A0B;fork&#x5B50;&#x8FDB;&#x7A0B;&#x540E;&#xFF0C;<strong>&#x5B50;&#x8FDB;&#x7A0B;&#x7684;binder&#x7684;Server&#x6C38;&#x8FDC;&#x5904;&#x4E8E;&#x4E00;&#x79CD;&#x6302;&#x8D77;&#x4E0D;&#x53EF;&#x6062;&#x590D;&#x7684;&#x72B6;&#x6001;</strong>&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BBE;&#x8BA1;&#x65E0;&#x7591;&#x662F;&#x975E;&#x5E38;&#x5DEE;&#x7684;&#x3002;</p>
</blockquote>
<p><strong>3&#x3001;&#x5185;&#x5B58;&#x95EE;&#x9898;&#xFF1A;</strong></p>
<p>&#x8FDB;&#x7A0B;&#x7684;fork&#xFF0C;&#x5404;&#x79CD;&#x5185;&#x5B58;&#x5BF9;&#x8C61;&#x81EA;&#x7136;&#x4E5F;&#x4F1A;&#x88AB;&#x62F7;&#x8D1D;&#xFF08;<del>&#x662F;&#x62F7;&#x8D1D;&#x4E00;&#x4E2A;&#x548C;&#x539F;&#x8FDB;&#x7A0B;&#x4E00;&#x6478;&#x4E00;&#x6837;&#x7684;&#x8FDB;&#x7A0B;</del>&#xFF09;&#x3002;</p>
<p>--------&gt;  &#x5982;&#x679C;&#x7528;socket&#xFF0C;&#x5360;&#x5185;&#x5B58;&#xFF0C;-------&gt; &#x6240;&#x4EE5; &#x5173;&#x95ED;socket&#xFF08;<del>fork&#x4E24;&#x6B21;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;&#x5224;&#x65AD;&#x662F;&#x5B50;&#x7EBF;&#x7A0B;&#x65F6;</del>&#xFF09;</p>
<p>--------&gt;  &#x5982;&#x679C;&#x7528;binder&#xFF0C;&#x5360;&#x5185;&#x5B58;  -------&gt;  &#x65E0;&#x6CD5;&#x91CA;&#x653E;&#xFF0C;binder&#x6210;&#x5BF9;&#x5B58;&#x5728;&#xFF1F;&#x6210;&#x5BF9;&#x91CA;&#x653E;&#xFF1F;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x91CA;&#x653E;AMS&#x7AEF;&#x7684;client binder</p>
<pre class="language-"><code class="lang-cpp">Binder&#x7684;&#x7279;&#x6B8A;&#x6027;&#x5728;&#x4E8E;&#x5176;&#x662F;&#x6210;&#x5BF9;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x5176;&#x5206;&#x4E3A;Client&#x7AEF;&#x5BF9;&#x8C61;&#x548C;Server&#x7AEF;&#x5BF9;&#x8C61;&#x3002;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x4F7F;&#x7528;binder&#xFF0C;&#x90A3;&#x4E48;&#x56E0;&#x4E3A;APP&#x7AEF;&#x7684;binder&#x662F;&#x62F7;&#x8D1D;&#x81EA;Zygote&#x8FDB;&#x7A0B;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x8981;&#x91CA;&#x653E;&#x6389;APP&#x7684;Server&#x7AEF;binder&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x91CA;&#x653E;&#x6389;AMS&#x4E2D;&#x7684;Client&#x7AEF;binder&#x5BF9;&#x8C61;&#xFF0C;&#x90A3;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;AMS&#x5931;&#x53BB;binder&#x4ECE;&#x800C;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x5411;Zygote&#x53D1;&#x9001;&#x6D88;&#x606F;&#x3002;
</code></pre>
<p><strong>&#x603B;&#x4E4B;&#xFF1A;</strong></p>
<blockquote>
<p>&#x4EE5;&#x4E0A;&#x95EE;&#x9898;&#x90FD;&#x662F;&#x4E0D;&#x81F4;&#x547D;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x53EF;&#x4EE5;&#x5F3A;&#x884C;&#x7528;binder</p>
</blockquote>
<h1 id="&#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;"><a name="&#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;" class="anchor-navigation-ex-anchor" href="#&#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x4ECE;trace&#x89D2;&#x5EA6;----&#x5E94;&#x7528;&#x51B7;&#x542F;&#x52A8;</h1>
<p>1&#x3001;</p>

<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="InitSystem.html" class="navigation navigation-prev " aria-label="Previous page: Init System">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../其他核心服务/" class="navigation navigation-next " aria-label="Next page: 其他核心服务">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Start APP","level":"1.5.1.2","depth":3,"next":{"title":"其他核心服务","level":"1.5.2","depth":2,"path":"Andriod/其他核心服务/README.md","ref":"Andriod/其他核心服务/README.md","articles":[{"title":"1 Input Method","level":"1.5.2.1","depth":3,"path":"Andriod/其他核心服务/1_InputMethod.md","ref":"Andriod/其他核心服务/1_InputMethod.md","articles":[]},{"title":"Multi Client Ime","level":"1.5.2.2","depth":3,"path":"Andriod/其他核心服务/multi-client-ime.md","ref":"Andriod/其他核心服务/multi-client-ime.md","articles":[]},{"title":"无障碍_","level":"1.5.2.3","depth":3,"path":"Andriod/其他核心服务/无障碍_.md","ref":"Andriod/其他核心服务/无障碍_.md","articles":[]}]},"previous":{"title":"Init System","level":"1.5.1.1","depth":3,"path":"Andriod/关键流程/InitSystem.md","ref":"Andriod/关键流程/InitSystem.md","articles":[]},"dir":"ltr"},"config":{"//":["这是多行注释：    anchor-navigation-ex 是","anchor-navigation-ex 是","click-reveal 本地使用ok，但是github在build pages时，不识别click-reveal","accordion 也是折叠代码段","anchor-navigation-ex 是"],"plugins":["anchor-navigation-ex","toggle-chapters","expandable-chapters-small","splitter","code","page-treeview","popup","-search","-lunr","sidebar-style","auto-scroll-table","click-reveal","accordion","pageview-count","search-pro","prism","prism-themes","-highlight"],"root":"./markdownsFiles","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"sidebar-style":{"author":"Kent","title":"《prove》"},"tbfed-pagefooter":{"copyright":"Copyright &copy ershouche-FE 2019","modify_label":"文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"page-treeview":{"collapsed":false,"copyright":"Copyright © aleen42","minHeaderCount":"1","minHeaderDeep":"1"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"],"lang":{"flow":"typescript"},"ignore":["mermaid","eval-js"]},"disqus":{"shortName":"gitbookuse"},"splitter":{},"search-pro":{},"accordion":{},"auto-scroll-table":{},"popup":{},"lunr":{"maxIndexSize":400000},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"click-reveal":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"pageview-count":{},"prism-themes":{},"expandable-chapters-small":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"toggle-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"bookname":"笔记","variables":{},"title":"Kent的博客","gitbook":"*"},"file":{"path":"Andriod/关键流程/startAPP.md","mtime":"2023-12-23T17:15:05.755Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-10-20T16:37:50.727Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-toggle-chapters/toggle.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sidebar-style/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-click-reveal/click_reveal.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-accordion/accordionSelector.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

