# 目录

[TOC]



# 解耦案例

## 尽量不修改安卓framework层代码

比如，监听前台应用的切换： weichat ----> launcher

不在framework的ams里监控，这样耦合太深

用无障碍监听

> （优点：**修改放到APP里，这样对系统代码0修改-----> 大版本迁移0成本**）
>
> https://blog.csdn.net/yzwfeng/article/details/124584900   判断某App位于前台还是后台的6种方法
>
> 



## 退而求其次-----如果修改，插桩

不得已，要修改安卓系统层代码（framework层或native层）

-**规定：**

> 使用插桩的方式 :
>
> > 1、在aosp中函数插装(+注释)
> >
> > 2、函数实现放到一个单独文件里，与 原文件解耦





# 其他架构案例

## 一个soc，三个系统，为啥显示要共一个host？

一个soc： host仪表 + 安卓主控 + 安卓副驾--------->  全部在host渲染？

原因：

> 这样，只需要适配一个底层就行   ------->  为了硬件更加快速的适配？

TODO：

# framework代码解耦

代码解耦： ----->    自研，独立成函数、独立成类 

功能解耦：----->     独立成模块，各个模块之间通过通信



插桩：----->   一个功能，一行代码

SDK 结构： 第一层应该是权限校验，判空等

